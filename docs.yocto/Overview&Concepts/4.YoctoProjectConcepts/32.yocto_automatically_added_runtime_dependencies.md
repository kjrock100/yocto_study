# Yocto Project 자동으로 추가되는 런타임 의존성 (Automatically Added Runtime Dependencies)

Yocto Project 빌드 시스템은 패키지를 생성할 때, 해당 패키지가 타겟 시스템에서 올바르게 실행되기 위해 필요한 **런타임 의존성(Runtime Dependencies)**을 지능적으로 분석하여 자동으로 추가합니다.

## 1. 개요

레시피 작성자가 `RDEPENDS` 변수를 통해 명시적으로 의존성을 지정하지 않아도, BitBake는 빌드 과정(`do_package` 태스크)에서 생성된 파일들을 검사하여 필요한 패키지들을 찾아냅니다. 이는 시스템의 안정성을 높이고 개발자의 부담을 줄여줍니다.

## 2. 자동 의존성 추가 메커니즘

시스템은 주로 다음과 같은 방식으로 의존성을 파악합니다.

### 2.1 공유 라이브러리 의존성 (Shared Library Dependencies)
가장 대표적인 자동 의존성입니다.
*   **작동 방식:** 패키지 내의 모든 바이너리 실행 파일과 라이브러리 파일(ELF 포맷)을 스캔합니다. 이들이 링크하고 있는 공유 라이브러리 이름(`SONAME`)을 확인합니다.
*   **결과:** 해당 라이브러리를 제공하는 패키지를 찾아 자동으로 의존성 목록에 추가합니다.
*   **예시:** 어떤 프로그램이 `libc.so.6`를 사용한다면, 자동으로 `libc6` 패키지에 대한 의존성이 추가됩니다.

### 2.2 스크립트 인터프리터 (Script Interpreters)
스크립트 파일의 실행을 보장하기 위해 인터프리터를 확인합니다.
*   **작동 방식:** 패키지에 포함된 스크립트 파일의 첫 줄(Shebang, `#!`)을 분석합니다.
*   **결과:** `#!/bin/bash`로 시작하는 스크립트가 있다면 `bash` 패키지가, `#!/usr/bin/python3`로 시작한다면 `python3-core` 패키지가 의존성으로 추가됩니다.

### 2.3 심볼릭 링크 (Symbolic Links)
*   패키지 내의 심볼릭 링크가 다른 패키지에 포함된 파일을 가리키고 있다면, 해당 파일이 속한 패키지에 대한 의존성이 추가될 수 있습니다.

## 3. 의존성 제어 변수

자동으로 추가되는 것 외에 개발자가 직접 제어해야 하는 경우 다음 변수들을 사용합니다.

*   **`RDEPENDS` (Runtime Depends):** 실행에 필수적인 의존성입니다. 이 패키지들이 없으면 설치가 거부되거나 프로그램이 실행되지 않습니다.
    *   *주의: `dlopen()` 함수를 통해 런타임에 동적으로 로드되는 라이브러리는 자동 탐지되지 않으므로 반드시 `RDEPENDS`에 수동으로 추가해야 합니다.*
*   **`RRECOMMENDS` (Runtime Recommends):** 권장되는 의존성입니다. 기본적으로 설치되지만, 해당 패키지가 없어도 설치는 진행됩니다. (예: 기능 확장 모듈, 장치 드라이버 등)
*   **`RSUGGESTS` (Runtime Suggests):** 유용할 수 있지만 기본적으로 설치되지 않는 패키지입니다.

## 4. 의존성 확인 방법

빌드된 패키지의 의존성을 확인하려면 `oe-pkgdata-util` 도구를 사용할 수 있습니다.

```bash
# 특정 패키지의 런타임 의존성 조회
oe-pkgdata-util read-value RDEPENDS <package_name>
```

## 5. 요약

자동 런타임 의존성 추가 기능은 리눅스 시스템의 복잡한 라이브러리 관계를 자동으로 관리해주어, 개발자가 "Missing Library" 오류를 겪을 확률을 획기적으로 낮춰줍니다.
