# Yocto Project 메타데이터, 머신 설정 및 정책 설정 (Metadata, Machine Configuration, and Policy Configuration)

Yocto Project 빌드 시스템은 "무엇을" 빌드할지 결정하기 위해 **메타데이터(Metadata)**를 사용합니다. 이 메타데이터는 크게 **머신 설정(Machine Configuration)**과 **정책 설정(Policy Configuration)**으로 나뉘어 관리됩니다.

## 1. 메타데이터 (Metadata)

메타데이터는 BitBake가 소프트웨어를 빌드하는 데 필요한 모든 지침(Instructions)과 데이터의 집합입니다.

*   **구성 요소:**
    *   **레시피 (`.bb`, `.bbappend`)**: 패키지 빌드 방법.
    *   **설정 파일 (`.conf`)**: 전역 변수 및 환경 설정.
    *   **클래스 (`.bbclass`)**: 공통 빌드 로직.
    *   **인클루드 파일 (`.inc`)**: 공통 설정 조각.
*   **관리:** 메타데이터는 **레이어(Layer)** 단위로 그룹화되어 관리됩니다.

## 2. 배포판 레이어와 정책 설정 (Distro Layer & Policy Configuration)

**정책 설정(Policy Configuration)**은 배포판(Distribution) 전체에 적용되는 일반적인 규칙을 정의합니다. 이는 주로 **배포판 레이어(Distro Layer)** 내의 `conf/distro/${DISTRO}.conf` 파일에 위치합니다.

### 주요 역할
*   **초기화 시스템:** 시스템 부팅 시 `SysVinit`을 사용할지 `systemd`를 사용할지 결정합니다.
*   **C 라이브러리:** `glibc`와 `musl` 중 어떤 표준 C 라이브러리를 사용할지 선택합니다.
*   **패키지 관리:** `rpm`, `deb`, `ipk` 중 어떤 패키지 형식을 사용할지 정의합니다.
*   **툴체인:** 사용할 GCC 버전 등 컴파일러 설정을 정의합니다.
*   **기능 제어 (`DISTRO_FEATURES`):** `x11`, `wayland`, `opengl`, `wifi`, `bluetooth` 등 배포판 전반에서 지원할 기능을 켜거나 끕니다.

### 예시 (Poky)
Yocto Project의 레퍼런스 배포판인 **Poky**는 `meta-poky` 레이어에서 이러한 정책을 정의합니다.

## 3. BSP 레이어와 머신 설정 (BSP Layer & Machine Configuration)

**머신 설정(Machine Configuration)**은 특정 하드웨어(Board)를 동작시키기 위한 설정을 정의합니다. 이는 **BSP(Board Support Package) 레이어** 내의 `conf/machine/${MACHINE}.conf` 파일에 위치합니다.

### 주요 역할
*   **커널 (Kernel):** 사용할 리눅스 커널 버전, 소스 위치, `defconfig` 설정 등을 지정합니다 (`PREFERRED_PROVIDER_virtual/kernel`).
*   **부트로더 (Bootloader):** U-Boot, GRUB 등 부트로더 설정과 이미지를 정의합니다.
*   **드라이버:** 그래픽, WiFi, Bluetooth 등 하드웨어 특화 드라이버를 포함합니다.
*   **튜닝 (Tuning):** CPU 아키텍처(예: `cortex-a72`), FPU 사용 여부(`hard-float`) 등 컴파일러 최적화 옵션을 설정합니다.
*   **머신 기능 (`MACHINE_FEATURES`):** 하드웨어가 물리적으로 지원하는 기능(예: `touchscreen`, `keyboard`, `wifi`)을 명시합니다.

### 예시 (Raspberry Pi)
`meta-raspberrypi` 레이어는 라즈베리 파이 보드를 위한 커널, 펌웨어, 부트 설정을 제공합니다.

## 4. 요약: 설정의 계층 구조

Yocto Project는 설정을 분리하여 유연성을 극대화합니다.

| 설정 유형 | 정의 위치 (Layer) | 파일 예시 | 역할 |
| :--- | :--- | :--- | :--- |
| **정책 (Policy)** | Distro Layer | `conf/distro/poky.conf` | "어떤 스타일의 리눅스를 만들 것인가?" (init, libc, package format) |
| **머신 (Machine)** | BSP Layer | `conf/machine/rpi4.conf` | "어떤 하드웨어에서 실행할 것인가?" (kernel, bootloader, drivers) |
| **소프트웨어** | Software Layer | `recipes-qt/...` | "어떤 애플리케이션을 실행할 것인가?" |
