# Yocto Project 사용자 설정 (User Configuration)

Yocto Project에서 **사용자 설정(User Configuration)**은 빌드 프로세스를 제어하고 커스터마이징하기 위해 사용자가 직접 정의하는 설정입니다.

## 1. 개요

사용자 설정은 빌드 디렉토리 내의 `conf/local.conf` 파일을 통해 관리됩니다. 이 파일은 빌드 환경을 초기화할 때(`source oe-init-build-env`) 템플릿으로부터 생성됩니다.

## 2. 주요 역할

사용자 설정은 다음과 같은 빌드 시스템의 동작을 제어합니다.

*   **빌드 성능:** 병렬 빌드 실행 수 등을 조절하여 호스트 시스템의 자원 사용량을 관리합니다.
*   **디렉토리 경로:** 소스 다운로드 및 캐시 저장 위치를 지정하여 여러 빌드 간에 데이터를 공유할 수 있게 합니다.
*   **타겟 및 정책:** 어떤 하드웨어(`MACHINE`)와 배포판 정책(`DISTRO`)을 사용할지 선택합니다.
*   **패키지 관리:** 생성할 패키지 형식(RPM, DEB, IPK)을 결정합니다.
*   **이미지 기능:** 디버깅 도구나 패키지 관리 도구 등 이미지에 추가할 기능을 설정합니다.

## 3. 주요 변수 (local.conf)

`local.conf`에서 자주 사용되는 변수들은 다음과 같습니다.

### 3.1 하드웨어 및 배포판 선택
*   **`MACHINE`**: 빌드할 타겟 하드웨어를 지정합니다. (예: `qemux86-64`, `raspberrypi4`)
*   **`DISTRO`**: 사용할 배포판 정책을 지정합니다. (예: `poky`, `poky-tiny`)

### 3.2 빌드 성능 및 경로
*   **`DL_DIR`**: 소스 코드를 다운로드할 경로입니다. 여러 빌드 프로젝트에서 공유하여 다운로드 시간을 절약할 수 있습니다.
*   **`SSTATE_DIR`**: 공유 상태(Shared State) 캐시 경로입니다. 빌드 속도를 획기적으로 높여줍니다.
*   **`BB_NUMBER_THREADS`**: BitBake가 동시에 실행할 태스크의 수입니다.
*   **`PARALLEL_MAKE`**: 컴파일 시 `make`가 사용할 병렬 스레드 수입니다 (`-j` 옵션).

### 3.3 패키지 및 이미지 설정
*   **`PACKAGE_CLASSES`**: 패키지 형식을 지정합니다. (예: `package_rpm`, `package_deb`, `package_ipk`)
*   **`EXTRA_IMAGE_FEATURES`**: 이미지에 추가할 기능을 정의합니다. (예: `debug-tweaks`, `tools-sdk`)
*   **`USER_CLASSES`**: 빌드 과정에서 활성화할 추가 클래스입니다. (예: `buildstats`, `image-mklibs`)

## 4. 설정 팁

*   **공유 디렉토리 활용:** `DL_DIR`과 `SSTATE_DIR`을 빌드 디렉토리 외부의 공용 공간으로 설정하면, 새로운 빌드를 시작할 때 시간을 크게 단축할 수 있습니다.
*   **디스크 공간 모니터링:** `BB_DISKMON_DIRS` 변수를 통해 디스크 공간이 부족할 때 빌드를 중단하도록 설정할 수 있습니다.
*   **읽기 전용 미러:** `SSTATE_MIRRORS`를 사용하여 미리 빌드된 캐시를 가져오도록 설정할 수 있습니다.

---
*참고: `local.conf`의 설정은 `machine.conf`나 `distro.conf`의 설정보다 우선순위가 높거나, 해당 파일들에서 `?=`로 설정된 기본값을 덮어씁니다.*
