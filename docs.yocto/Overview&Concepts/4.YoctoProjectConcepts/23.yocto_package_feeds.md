# Yocto Project 패키지 피드 (Package Feeds)

Yocto Project에서 **패키지 피드(Package Feeds)**는 빌드 시스템이 생성한 소프트웨어 패키지(RPM, DEB, IPK)들이 저장되는 구조화된 저장소입니다.

## 1. 개요

BitBake가 빌드를 수행하면, 컴파일된 결과물은 선택한 패키지 형식으로 패키징되어 `tmp/deploy/` 디렉토리 아래에 저장됩니다. 이 디렉토리 구조는 패키지 관리자가 네트워크를 통해 접근하여 소프트웨어를 설치하거나 업데이트할 수 있는 **피드(Feed)** 역할을 합니다.

## 2. 역할

### 2.1 이미지 생성 (Image Generation)
BitBake가 루트 파일시스템 이미지를 생성할 때, 이 패키지 피드에서 필요한 패키지들을 가져와 설치합니다.

### 2.2 런타임 패키지 관리 (Runtime Package Management)
타겟 디바이스가 부팅된 후, `dnf`, `apt`, `opkg` 등의 패키지 관리 도구를 사용하여 원격 서버(패키지 피드)로부터 새로운 패키지를 설치하거나 시스템을 업그레이드할 수 있습니다.

## 3. 설정 및 구성

### 3.1 패키지 형식 선택
`local.conf` 파일에서 `PACKAGE_CLASSES` 변수를 사용하여 패키지 형식을 지정합니다.

```bitbake
PACKAGE_CLASSES ?= "package_rpm"
```

### 3.2 피드 활성화
타겟 이미지에 패키지 관리 도구를 포함시키려면 `EXTRA_IMAGE_FEATURES`에 `package-management`를 추가해야 합니다.

```bitbake
EXTRA_IMAGE_FEATURES += "package-management"
```

## 4. 피드 구조 및 위치

빌드가 완료되면 패키지들은 다음 경로에 아키텍처별로 분류되어 저장됩니다.

*   **경로:** `build/tmp/deploy/<package_format>/` (예: `tmp/deploy/rpm/`)
*   **구조:**
    *   `noarch` (또는 `all`): 아키텍처 독립적인 패키지 (스크립트, 데이터 등).
    *   `<machine_arch>` (예: `cortexa72`): 타겟 CPU 아키텍처에 특화된 패키지.
    *   `<machine>` (예: `raspberrypi4`): 특정 머신에 특화된 패키지.

## 5. 패키지 피드 사용하기 (런타임)

1.  **서버 설정:** 개발 호스트의 `tmp/deploy/<format>` 디렉토리를 HTTP 서버(Apache, Nginx, Python http.server 등)로 호스팅합니다.
2.  **타겟 설정:** 타겟 디바이스의 패키지 관리자 설정 파일(예: `/etc/yum.repos.d/` 또는 `/etc/opkg/`)에 호스트의 IP 주소와 포트를 가리키는 피드 URL을 등록합니다.
3.  **사용:** 타겟에서 패키지 목록을 업데이트하고 설치합니다.

## 6. 요약

패키지 피드는 개발 단계에서 빠른 테스트를 가능하게 하고, 배포 후에는 시스템 유지 보수 및 업데이트를 위한 핵심 메커니즘을 제공합니다.
