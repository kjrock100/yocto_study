# Yocto Project 레이어 (Layers)

Yocto Project 빌드 시스템은 **레이어(Layers)**라는 구조를 통해 메타데이터를 관리합니다. 레이어는 Yocto Project의 모듈성과 확장성을 보장하는 핵심 메커니즘입니다.

## 1. 개요

레이어는 관련된 레시피, 설정 파일, 클래스 등을 담고 있는 디렉토리입니다. 이를 통해 시스템의 특정 기능(예: 하드웨어 지원, GUI 프레임워크, 보안 기능 등)을 격리된 형태로 추가하거나 수정할 수 있습니다.

## 2. 레이어의 필요성

*   **모듈성 (Modularity):** 거대한 단일 저장소 대신, 기능별로 분리된 레이어를 사용하여 필요한 기능만 선택적으로 포함할 수 있습니다.
*   **재사용성 (Reusability):** 하드웨어 지원 레이어(BSP)를 변경하지 않고도 상위 애플리케이션 레이어를 다른 프로젝트에 재사용할 수 있습니다.
*   **격리 (Isolation):** 핵심 빌드 시스템(OE-Core)을 직접 수정하지 않고, 사용자 정의 레이어에서 `.bbappend`를 사용하여 기존 설정을 오버라이드할 수 있습니다. 이는 업그레이드 시 유지 보수를 용이하게 합니다.

## 3. 레이어의 구조

모든 레이어는 다음과 같은 기본 구조를 가집니다.

*   **`conf/layer.conf`**: 레이어의 설정 파일입니다. BitBake가 이 레이어를 인식하고 파싱하는 방법을 정의합니다.
*   **`recipes-*`**: 레시피 파일들이 위치하는 디렉토리입니다.
*   **`COPYING.MIT`**: 라이선스 파일 (선택 사항).

### `conf/layer.conf` 주요 변수
*   **`BBPATH`**: BitBake가 클래스나 설정 파일을 찾을 때 사용하는 경로에 레이어 경로를 추가합니다.
*   **`BBFILES`**: BitBake가 파싱해야 할 레시피 파일들의 패턴을 정의합니다.
*   **`BBFILE_COLLECTIONS`**: 레이어의 이름을 정의합니다.
*   **`BBFILE_PRIORITY`**: 레이어의 우선순위를 설정합니다. 같은 레시피가 여러 레이어에 있을 때 우선순위가 높은 레이어의 것이 사용됩니다.
*   **`LAYERSERIES_COMPAT`**: 레이어가 호환되는 Yocto Project 릴리스 버전(예: `scarthgap`, `kirkstone`)을 명시합니다.

## 4. 레이어 관리

### 4.1 레이어 추가
빌드 프로젝트의 `conf/bblayers.conf` 파일에 레이어의 경로를 추가하여 활성화합니다.
`bitbake-layers add-layer <path/to/layer>` 명령어를 사용할 수도 있습니다.

### 4.2 레이어 생성
`bitbake-layers create-layer <layer-name>` 명령어를 사용하여 기본 구조를 갖춘 새 레이어를 생성할 수 있습니다.

## 5. 요약

레이어는 Yocto Project에서 "설정"과 "정책"을 "하드웨어" 및 "소프트웨어"와 분리하는 도구입니다. 이를 통해 개발자는 복잡한 시스템을 체계적으로 관리하고 협업할 수 있습니다.
