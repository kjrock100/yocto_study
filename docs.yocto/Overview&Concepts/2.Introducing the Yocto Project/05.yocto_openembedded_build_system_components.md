# Yocto Project OpenEmbedded 빌드 시스템 구성 요소 (OpenEmbedded Build System Components)

OpenEmbedded 빌드 시스템은 Yocto Project의 핵심으로, 소스 코드를 다운로드하고 컴파일하여 부팅 가능한 이미지로 만드는 과정을 담당합니다. 이 시스템은 BitBake 실행 엔진과 다양한 메타데이터로 구성됩니다.

## 1. 개요

빌드 시스템은 **BitBake**라는 작업 스케줄러와 **메타데이터(Metadata)**라고 불리는 설정 및 지침 파일들의 집합으로 이루어져 있습니다. 메타데이터는 레시피, 설정 파일, 클래스 등을 포함하며, 이들은 레이어(Layer) 단위로 관리됩니다.

## 2. 주요 구성 요소

### 2.1 BitBake
BitBake는 빌드 시스템의 엔진입니다.
*   **역할:** 메타데이터를 파싱하고, 작업(Task) 간의 의존성 트리를 생성하며, 정의된 순서대로 작업을 실행합니다.
*   **기능:** 소스 코드 다운로드(fetch), 압축 해제(unpack), 패치(patch), 구성(configure), 컴파일(compile), 설치(install), 패키징(package) 등의 단계를 관리합니다.
*   **유사성:** `make`와 비슷하지만, 단일 프로젝트가 아닌 전체 리눅스 배포판을 빌드하도록 설계되었습니다.

### 2.2 레시피 (Recipes)
레시피는 개별 소프트웨어 패키지를 빌드하는 방법을 정의한 파일입니다.
*   **확장자:** `.bb`
*   **내용:**
    *   소스 코드의 위치 (URL, Git 저장소 등)
    *   빌드 의존성 (DEPENDS) 및 런타임 의존성 (RDEPENDS)
    *   설정 및 컴파일 옵션
    *   설치할 파일 목록 및 위치
    *   라이선스 정보

### 2.3 클래스 (Classes)
클래스는 여러 레시피에서 공통적으로 사용되는 빌드 로직을 캡슐화한 파일입니다.
*   **확장자:** `.bbclass`
*   **역할:** 코드 중복을 줄이고 유지 보수성을 높입니다. 레시피는 `inherit` 키워드를 사용하여 클래스를 상속받을 수 있습니다.
*   **예시:**
    *   `autotools`: Autotools 기반 프로젝트 빌드 지원.
    *   `cmake`: CMake 기반 프로젝트 빌드 지원.
    *   `python3-native`: 파이썬 모듈 빌드 지원.

### 2.4 설정 (Configuration)
설정 파일은 빌드 환경, 타겟 하드웨어, 배포판 정책 등을 정의하는 전역 변수들을 포함합니다.
*   **확장자:** `.conf`
*   **주요 파일:**
    *   `local.conf`: 사용자별 로컬 빌드 설정.
    *   `bblayers.conf`: 활성화된 레이어 목록 정의.
    *   `machine.conf`: 타겟 하드웨어 아키텍처 및 기능 정의 (BSP).
    *   `distro.conf`: 배포판 정책 정의 (init 시스템, 툴체인 등).

### 2.5 레이어 (Layers)
레이어는 위에서 설명한 메타데이터(레시피, 클래스, 설정)를 논리적으로 그룹화한 디렉토리입니다.
*   **구조:** `meta-` 접두사를 사용하는 것이 관례입니다.
*   **장점:** 모듈화 및 재사용성을 제공하며, 서로 다른 레이어 간의 격리를 통해 시스템을 체계적으로 관리할 수 있게 합니다.

## 3. 구성 요소 간의 관계

1.  **사용자**가 `bitbake` 명령을 실행합니다.
2.  **BitBake**는 `conf/` 디렉토리의 **설정 파일**을 읽어 환경을 구성합니다.
3.  `bblayers.conf`에 정의된 **레이어**들을 스캔하여 **레시피**와 **클래스**를 파싱합니다.
4.  의존성 그래프를 계산하고, 필요한 순서대로 빌드 작업을 실행하여 최종 이미지를 생성합니다.

---
*참고: 이 모든 구성 요소가 함께 작동하여 소스 코드를 기능하는 리눅스 시스템으로 변환합니다.*
