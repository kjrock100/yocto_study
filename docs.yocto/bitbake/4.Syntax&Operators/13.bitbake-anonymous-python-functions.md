# 익명 파이썬 함수 (Anonymous Python Functions)

BitBake에서 익명 파이썬 함수는 이름이 없는 함수로, 레시피 파싱 과정 중에 자동으로 실행되는 코드를 작성할 때 사용됩니다. 주로 빌드 설정을 동적으로 검사하거나 변경하는 데 활용됩니다.

## 4.5.5 정의 및 실행 (Definition and Execution)

익명 함수는 `python` 키워드 뒤에 함수 이름 없이 괄호 `()`를 사용하거나 생략하여 정의합니다.

```bitbake
python () {
    # Python code
}
```

또는

```bitbake
python {
    # Python code
}
```

**실행 시점**:
이 함수들은 레시피 파일(`.bb`)의 파싱이 끝나는 시점에 실행됩니다. 즉, 레시피 내의 모든 변수 설정이 완료된 후에 실행되므로, 설정된 변수 값을 확인하고 이를 바탕으로 다른 변수를 동적으로 변경하거나 예외를 발생시키는 등의 작업에 적합합니다.

## 4.5.5.1 주요 용도 (Use Cases)

1.  **동적 변수 설정**: 조건에 따라 변수 값을 변경하거나 추가합니다.
2.  **유효성 검사**: 특정 변수가 설정되었는지 확인하거나, 호환되지 않는 설정이 있는지 검사하여 `bb.fatal()` 등으로 빌드를 중단시킵니다.
3.  **패키지 설정 변경**: `PACKAGES` 변수를 동적으로 수정하거나 패키지별 변수를 설정합니다.

## 4.5.5.2 예제 (Examples)

**조건부 변수 설정:**

```bitbake
python () {
    if d.getVar('SOME_VAR') == 'value':
        d.setVar('ANOTHER_VAR', 'new_value')
}
```

**레시피 스킵 (Skip Recipe):**

```bitbake
python () {
    if d.getVar('COMPATIBLE_MACHINE') == 'forbidden_machine':
        raise bb.parse.SkipRecipe("This recipe is not compatible with forbidden_machine")
}
```
