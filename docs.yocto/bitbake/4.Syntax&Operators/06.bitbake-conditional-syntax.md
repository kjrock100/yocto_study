# 조건부 문법 (Conditional Syntax - Overrides)

BitBake는 빌드 환경, 타겟 아키텍처, 머신 설정 등에 따라 변수의 값을 다르게 설정할 수 있는 **Overrides** 메커니즘을 제공합니다. 이를 통해 하나의 레시피로 다양한 환경을 유연하게 지원할 수 있습니다.

## 4.3.1 조건부 메타데이터 (Conditional Metadata)

변수 이름 뒤에 콜론(`:`)과 오버라이드 식별자를 붙여서 특정 조건이 만족될 때만 해당 값을 사용하도록 설정할 수 있습니다.

```bitbake
# 기본값
KBRANCH = "standard/base"

# 'qemuarm' 머신일 경우에만 적용되는 값
KBRANCH:qemuarm = "standard/arm-versatile-926ejs"
```

BitBake는 `OVERRIDES` 변수에 정의된 식별자 목록을 확인하여 가장 구체적인 조건(우선순위가 높은 조건)을 적용합니다.

> **참고:** 과거 Yocto Project 버전에서는 언더스코어(`_`)를 구분자로 사용했으나(예: `KBRANCH_qemuarm`), 최신 버전(Honister 이후)에서는 변수 이름과 오버라이드를 명확히 구분하기 위해 콜론(`:`) 문법을 표준으로 사용합니다.

## 4.3.2 키 확장 (Key Expansion)

변수의 값뿐만 아니라 변수의 이름(Key) 부분에서도 변수 확장이 가능합니다. 이는 동적으로 변수명을 생성하여 값을 할당할 때 매우 유용합니다.

```bitbake
PN = "my-package"
FILES:${PN} = "/usr/bin/myapp"
# 결과적으로 FILES:my-package = "/usr/bin/myapp" 으로 해석됨
```

## 4.3.3 예시 (Examples)

`OVERRIDES` 변수가 다음과 같이 설정되어 있다고 가정해 봅시다. (오른쪽일수록 우선순위가 높습니다)

```bitbake
OVERRIDES = "linux:arm:qemuarm"
```

이 경우 BitBake는 변수를 찾을 때 다음 순서로 오버라이드를 적용하여 값을 결정합니다.

1.  `VARIABLE:qemuarm` (가장 높은 우선순위)
2.  `VARIABLE:arm`
3.  `VARIABLE:linux`
4.  `VARIABLE` (기본값)

```bitbake
FOO = "default"
FOO:linux = "linux-value"
FOO:arm = "arm-value"
FOO:qemuarm = "qemuarm-value"

# 결과: FOO 변수의 값은 "qemuarm-value"가 됩니다.
```

여러 오버라이드와 연산자를 조합하여 사용할 수도 있습니다.

```bitbake
DEPENDS = "glibc"
DEPENDS:append:qemuarm = " libgcc"
# qemuarm일 때 DEPENDS는 "glibc libgcc"가 됩니다.
```
