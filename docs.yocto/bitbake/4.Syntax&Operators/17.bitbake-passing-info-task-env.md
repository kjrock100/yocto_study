# 빌드 태스크 환경으로 정보 전달 (Passing Information Into the Build Task Environment)

BitBake는 빌드의 재현성을 보장하기 위해, 태스크를 실행할 때 호스트 시스템의 환경 변수를 대부분 제거하고 엄격하게 통제된 환경을 구성합니다. 따라서 필요한 정보가 있다면 명시적으로 전달해야 합니다.

## 4.6.3 정보 전달 방법

레시피나 설정 파일에 정의된 변수를 태스크(주로 셸 함수)의 실행 환경으로 전달하려면 `export` 명령어를 사용해야 합니다.

### 환경 변수 필터링 (Environment Filtering)

BitBake는 태스크를 실행하기 전에 초기 환경 변수들을 정리합니다. 이는 한 개발자의 머신에 설정된 우연한 환경 변수가 빌드 결과에 영향을 미치는 것을 방지하기 위함입니다.

### export 사용 (Using export)

데이터 저장소(Datastore)에 있는 변수를 태스크의 셸 환경 변수로 만들려면 `export` 키워드를 사용합니다.

```bitbake
export SOURCE_DATE_EPOCH
do_compile() {
    # 이제 SOURCE_DATE_EPOCH 환경 변수를 사용할 수 있습니다.
    echo "Date: $SOURCE_DATE_EPOCH"
}
```

만약 `export` 하지 않는다면, `SOURCE_DATE_EPOCH` 변수는 BitBake 내부적으로는 존재하지만, `do_compile`이 실행되는 셸 프로세스에는 전달되지 않습니다.

### 호스트 환경 변수 전달 (Passing Host Environment Variables)

만약 호스트 머신(BitBake를 실행하는 터미널)의 환경 변수를 빌드 내부로 가져오고 싶다면, 먼저 BitBake가 이를 허용하도록 설정해야 합니다.

1.  **허용 목록 추가**: `BB_ENV_PASSTHROUGH_ADDITIONS` (구 `BB_ENV_EXTRAWHITE`) 변수에 해당 환경 변수 이름을 추가합니다.
2.  **변수 설정**: BitBake가 실행될 때 해당 변수가 설정되어 있어야 합니다.

이렇게 BitBake 내부로 들어온 변수는 레시피 내에서 다시 `export` 되어야 실제 태스크 실행 환경에서 사용할 수 있습니다.

```bitbake
export MY_HOST_VAR
```
