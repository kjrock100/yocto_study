# 클래스 함수의 유연한 상속 (Flexible Inheritance for Class Functions)

BitBake는 클래스(`.bbclass`)에서 정의된 함수를 레시피(`.bb`)에서 상속받아 사용할 때, 이를 오버라이드(재정의)하거나 원본 함수를 호출할 수 있는 유연한 메커니즘을 제공합니다. 이는 `EXPORT_FUNCTIONS` 지시어를 통해 구현됩니다.

## 4.5.6 개요 (Overview)

일반적으로 셸 함수나 파이썬 함수는 나중에 파싱된 정의가 이전 정의를 덮어씁니다. 클래스를 상속(`inherit`)하면 클래스 내의 함수들이 레시피에 정의된 것처럼 동작합니다. 만약 레시피에서 동일한 이름의 함수를 다시 정의하면, 클래스의 함수는 완전히 대체되어 호출할 수 없게 됩니다.

하지만 때로는 클래스의 기본 동작을 유지하면서 전후에 추가 작업을 수행하거나, 조건부로 기본 동작을 호출하고 싶을 때가 있습니다. `EXPORT_FUNCTIONS`는 이러한 패턴을 지원합니다.

## 4.5.6.1 작동 원리 (How it works)

클래스 파일 내에서 함수를 정의할 때, 함수 이름 앞에 `classname_` 접두어를 붙여 정의합니다. 그리고 `EXPORT_FUNCTIONS` 지시어에 원래 함수 이름(접두어 제외)을 나열합니다.

BitBake는 이를 처리하여 다음을 수행합니다.
1.  `classname_funcname` 함수를 `funcname`으로 매핑합니다.
2.  레시피에서 `funcname`을 호출하면 기본적으로 `classname_funcname`이 실행됩니다.
3.  만약 레시피에서 `funcname`을 재정의하더라도, `classname_funcname`은 여전히 존재하므로 명시적으로 호출할 수 있습니다.

## 4.5.6.2 예제 (Example)

**클래스 파일 (`foo.bbclass`):**

```bitbake
foo_do_configure() {
    echo "Running default foo configure"
}

EXPORT_FUNCTIONS do_configure
```

**레시피 파일 (`myrecipe.bb`):**

```bitbake
inherit foo

do_configure() {
    echo "Before default configure"
    # 클래스의 원본 함수 호출
    foo_do_configure
    echo "After default configure"
}
```

이 경우 `do_configure` 태스크가 실행되면, 레시피의 `do_configure`가 호출되고, 그 안에서 `foo.bbclass`의 `foo_do_configure`가 실행됩니다.

## 4.5.6.3 활용 (Usage)

이 기능은 `base.bbclass`, `autotools.bbclass` 등 Yocto Project의 핵심 클래스들에서 `do_configure`, `do_compile`, `do_install` 등의 표준 태스크를 정의할 때 광범위하게 사용됩니다. 이를 통해 개발자는 표준 빌드 절차를 따르면서도 필요한 부분만 수정하거나 확장할 수 있습니다.
