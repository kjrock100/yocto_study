# 변수 플래그 (Variable Flags)

변수 플래그(Variable Flags)는 BitBake 변수에 추가적인 속성이나 메타데이터를 부여하는 방법입니다. 변수의 값(Value)과는 별도로 관리되며, 주로 태스크의 동작을 제어하거나 변수에 대한 설명을 문서화하는 데 사용됩니다.

## 4.7.1 문법 (Syntax)

변수 이름 뒤에 대괄호 `[]`를 사용하여 플래그 이름을 지정하고 값을 할당합니다.

```bitbake
VARIABLE[flag] = "value"
```

예를 들어, `do_compile` 태스크에 대한 설명을 추가하려면 다음과 같이 작성합니다.

```bitbake
do_compile[doc] = "The compile task"
```

## 4.7.2 주요 플래그 (Common Flags)

BitBake에서 자주 사용되는 표준 플래그들은 다음과 같습니다.

### 태스크 제어 관련

*   **`[dirs]`**: 태스크가 실행되기 전에 생성되어야 할 디렉토리 목록을 지정합니다. BitBake는 태스크 실행 전에 이 디렉토리들이 존재하는지 확인하고 없으면 생성합니다.
*   **`[cleandirs]`**: 태스크 실행 전에 생성되어야 하지만, 만약 이미 존재한다면 내용을 비워야(clean) 할 디렉토리 목록입니다.
*   **`[noexec]`**: 이 플래그를 "1"로 설정하면 해당 태스크는 실행되지 않습니다. 태스크를 삭제(`deltask`)하는 것과 달리 의존성 관계는 유지됩니다.
*   **`[nostamp]`**: 이 플래그를 "1"로 설정하면 태스크 실행 후 스탬프(stamp) 파일을 생성하지 않습니다. 따라서 이 태스크는 빌드할 때마다 항상 다시 실행됩니다.
*   **`[fakeroot]`**: 이 플래그를 "1"로 설정하면 태스크가 `fakeroot` (Pseudo) 환경에서 실행되어 루트 권한을 시뮬레이션합니다.

### 의존성 관련

*   **`[depends]`**: 태스크 간의 의존성을 정의할 때 사용됩니다. 일반적으로 `addtask` 명령어를 통해 의존성을 관리하지만, 특정 상황에서 플래그를 통해 직접 제어할 수도 있습니다.
*   **`[deptask]`**: 변수 생성 시 의존해야 할 태스크를 지정합니다 (예: `do_populate_sysroot`).

### 기타

*   **`[doc]`**: 변수나 태스크에 대한 설명(Documentation) 문자열을 저장합니다. `bitbake -e` 등으로 변수 정보를 조회할 때 유용합니다.

## 4.7.3 Python에서 플래그 다루기

BitBake 파이썬 함수 내에서는 데이터 저장소 객체 `d`의 메서드를 사용하여 플래그를 읽거나 쓸 수 있습니다.

*   `d.getVarFlag("VARIABLE", "flag")`: 플래그 값을 가져옵니다.
*   `d.setVarFlag("VARIABLE", "flag", "value")`: 플래그 값을 설정합니다.
*   `d.delVarFlag("VARIABLE", "flag")`: 플래그를 삭제합니다.

```python
python () {
    # do_compile 태스크의 'dirs' 플래그 가져오기
    dirs = d.getVarFlag("do_compile", "dirs")
}
```
