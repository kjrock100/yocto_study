# 변형 — 클래스 확장 메커니즘 (Variants — Class Extension Mechanism)

BitBake는 하나의 레시피 파일로 여러 가지 변형(Variant)을 빌드할 수 있는 강력한 기능을 제공합니다. 이를 통해 타겟 장치용 패키지뿐만 아니라, 빌드 호스트에서 실행되는 도구(native)나 SDK용 도구(nativesdk)를 별도의 레시피 작성 없이 생성할 수 있습니다.

## 4.9.1 BBCLASSEXTEND

이 기능의 핵심은 `BBCLASSEXTEND` 변수입니다. 레시피 내에서 이 변수를 설정하면, BitBake는 자동으로 해당 레시피의 변형 버전을 생성합니다.

### 사용법 (Usage)

```bitbake
BBCLASSEXTEND = "native nativesdk"
```

위와 같이 설정하면, BitBake는 내부적으로 다음 두 가지 가상 레시피를 추가로 생성합니다.

1.  **`recipe-native`**: 빌드 호스트에서 실행될 버전. `native.bbclass`를 상속받습니다.
2.  **`recipe-nativesdk`**: SDK 환경에서 실행될 버전. `nativesdk.bbclass`를 상속받습니다.

## 4.9.2 작동 원리 (How it Works)

`BBCLASSEXTEND`에 지정된 클래스(예: `native`)는 실제로 `classes/native.bbclass` 파일을 의미합니다. BitBake는 원본 레시피를 파싱한 후, 지정된 확장 클래스를 상속(`inherit`)하여 변형된 레시피 데이터를 생성합니다.

이 과정에서 `PN` (패키지 이름) 등의 변수가 자동으로 수정됩니다.
*   `native`의 경우: `PN` -> `PN-native`
*   `nativesdk`의 경우: `PN` -> `nativesdk-PN`

## 4.9.3 멀티라이브러리 지원 (Multilib Support)

이 메커니즘은 멀티라이브러리(Multilib) 지원에도 사용됩니다. 예를 들어 64비트 시스템에서 32비트 라이브러리를 함께 빌드해야 할 때, `lib32-` 접두사를 붙여 변형을 생성할 수 있습니다.

```bitbake
# local.conf 등에서 설정
MULTILIBS = "multilib:lib32"
```

## 4.9.4 장점 (Benefits)

*   **중복 제거**: 동일한 소스 코드를 사용하는 `foo_1.0.bb`와 `foo-native_1.0.bb`를 따로 유지 관리할 필요가 없습니다.
*   **유지 보수 용이성**: 버전 업그레이드나 패치 적용 시 하나의 레시피만 수정하면 모든 변형에 적용됩니다.
