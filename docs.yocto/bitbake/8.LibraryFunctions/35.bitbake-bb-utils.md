# bb.utils 모듈 (bb.utils Module)

`bb.utils` 모듈은 BitBake 및 레시피 파이썬 코드 내에서 자주 사용되는 일반적인 유틸리티 함수들의 집합입니다. 파일 조작, 경로 처리, 버전 비교, 환경 변수 확인 등 다양한 기능을 제공합니다.

## 8.2.1 조건부 확인 (Conditional Checking)

가장 빈번하게 사용되는 함수들로, 변수의 값에 따라 다른 문자열을 반환하거나 로직을 분기할 때 사용됩니다.

### `bb.utils.contains(variable, checkvalues, truevalue, falsevalue, d)`

지정된 변수(`variable`)의 값이 리스트 형태일 때, `checkvalues`가 포함되어 있는지 확인합니다.

* 포함된 경우 `truevalue` 반환.
* 포함되지 않은 경우 `falsevalue` 반환.
* `checkvalues`가 여러 개일 경우 모두 포함되어야 참으로 간주합니다.

```python
# DISTRO_FEATURES에 'systemd'가 있으면 '--with-systemd', 없으면 '--without-systemd'
EXTRA_OECONF += "${@bb.utils.contains('DISTRO_FEATURES', 'systemd', '--with-systemd', '--without-systemd', d)}"
```

### `bb.utils.contains_any(variable, checkvalues, truevalue, falsevalue, d)`

`contains`와 유사하지만, `checkvalues` 중 **하나라도** 포함되어 있으면 참으로 간주합니다.

```python
# 'x11' 또는 'wayland' 중 하나라도 있으면 GUI 지원 활성화
GUI_SUPPORT = "${@bb.utils.contains_any('DISTRO_FEATURES', 'x11 wayland', 'true', 'false', d)}"
```

## 8.2.2 파일 및 디렉토리 조작 (File and Directory Manipulation)

### `bb.utils.mkdirhier(directory)`

지정된 디렉토리를 생성합니다. 상위 디렉토리가 존재하지 않으면 재귀적으로 생성합니다. (`mkdir -p`와 동일)

### `bb.utils.remove(path, recurse=False)`

파일이나 디렉토리를 삭제합니다.

* `recurse=True`: 디렉토리일 경우 내부 내용까지 재귀적으로 삭제합니다. (`rm -rf`와 유사)

### `bb.utils.prunedir(directory)`

디렉토리를 삭제하되, 비어있지 않으면 삭제하지 않습니다. 상위 디렉토리도 비어있게 되면 재귀적으로 삭제를 시도합니다.

### `bb.utils.copyfile(src, dest)`

파일을 복사합니다. 심볼릭 링크인 경우 링크 자체를 복사합니다.

### `bb.utils.movefile(src, dest)`

파일이나 디렉토리를 이동합니다. (`mv`와 유사)

## 8.2.3 파일 체크섬 (File Checksums)

파일의 무결성 검사나 변경 감지를 위해 해시 값을 계산합니다.

* **`bb.utils.md5_file(filename)`**: 파일의 MD5 체크섬을 반환합니다.
* **`bb.utils.sha256_file(filename)`**: 파일의 SHA-256 체크섬을 반환합니다.

## 8.2.4 기타 유틸리티 (Other Utilities)

### `bb.utils.to_boolean(string)`

문자열을 불리언(Boolean) 값으로 변환합니다.

* True: "y", "yes", "1", "true", "on" (대소문자 무관)
* False: "n", "no", "0", "false", "off"

### `bb.utils.which(path, item)`

`path` 환경 변수(주로 `PATH`)에 지정된 디렉토리 목록에서 `item` 실행 파일을 찾아 전체 경로를 반환합니다. 찾지 못하면 빈 문자열을 반환합니다.

```python
git_path = bb.utils.which(d.getVar('PATH'), 'git')
```

### `bb.utils.vercmp_string(a, b)`

두 버전 문자열 `a`와 `b`를 비교합니다.

* `a > b`: 1 반환
* `a < b`: -1 반환
* `a == b`: 0 반환

### `bb.utils.export_proxies(d)`

`http_proxy`, `https_proxy`, `ftp_proxy`, `no_proxy` 등 프록시 관련 환경 변수를 현재 프로세스 환경으로 내보냅니다(export). 네트워크 통신이 필요한 태스크에서 유용합니다.



