# 라이브러리 함수 (Library Functions)

BitBake는 메타데이터(레시피, 클래스) 및 BitBake 내부 코드에서 사용할 수 있는 표준 Python 함수 라이브러리를 제공합니다. 이들은 주로 `bb` 모듈과 `bb.utils` 모듈에 포함되어 있습니다.

## 8.1 로깅 유틸리티 (Logging Utilities)

빌드 과정에서 메시지를 출력하기 위한 함수들입니다. 이 함수들은 `bb` 모듈에 정의되어 있습니다.

*   **`bb.plain(msg)`**: 로그 파일이나 콘솔에 일반 텍스트 메시지를 출력합니다. 추가적인 포맷팅이나 로그 레벨 표시가 없습니다.
*   **`bb.note(msg)`**: 정보성 메시지(Note)를 출력합니다. 실행 흐름을 추적하는 데 유용합니다.
*   **`bb.warn(msg)`**: 경고 메시지(Warning)를 출력합니다. 잠재적인 문제가 있지만 빌드를 중단할 정도는 아닐 때 사용합니다.
*   **`bb.error(msg)`**: 에러 메시지(Error)를 출력합니다. 심각한 문제가 발생했음을 알리지만, 즉시 실행을 중단하지는 않습니다. (단, 태스크 실패로 이어질 수 있습니다.)
*   **`bb.fatal(msg)`**: 치명적인 에러(Fatal Error)를 출력하고 즉시 실행을 중단합니다.
*   **`bb.debug(level, msg)`**: 디버그 레벨에 따라 메시지를 출력합니다. `level`은 1, 2, 3 등의 정수이며, 사용자가 설정한 디버그 레벨(`-D`, `-DD` 등)에 따라 출력 여부가 결정됩니다.

## 8.2 bb.utils

`bb.utils` 모듈은 파일 조작, 경로 처리, 환경 변수 관리 등 다양한 유틸리티 함수를 제공합니다.

### 자주 사용되는 함수

*   **`bb.utils.contains(variable, checkvalues, truevalue, falsevalue, d)`**:
    변수(`variable`)의 값(리스트)에 `checkvalues`가 포함되어 있는지 확인합니다. 포함되어 있으면 `truevalue`를, 그렇지 않으면 `falsevalue`를 반환합니다. `DISTRO_FEATURES`나 `PACKAGECONFIG`를 확인할 때 가장 많이 사용됩니다.

    ```python
    # systemd가 DISTRO_FEATURES에 있으면 --with-systemd, 없으면 --without-systemd 반환
    EXTRA_OECONF += "${@bb.utils.contains('DISTRO_FEATURES', 'systemd', '--with-systemd', '--without-systemd', d)}"
    ```

*   **`bb.utils.mkdirhier(directory)`**:
    지정된 디렉토리를 생성합니다. 상위 디렉토리가 없으면 함께 생성합니다 (`mkdir -p`와 유사).

*   **`bb.utils.to_boolean(string)`**:
    문자열을 불리언(Boolean) 값으로 변환합니다. "yes", "y", "true", "1" 등은 `True`로, "no", "n", "false", "0" 등은 `False`로 변환됩니다.

*   **`bb.utils.which(path, item)`**:
    `path` 환경 변수(주로 `PATH`) 내에서 `item` 실행 파일을 찾아 전체 경로를 반환합니다.

*   **`bb.utils.export_proxies(d)`**:
    `http_proxy`, `https_proxy` 등 프록시 관련 환경 변수를 현재 환경으로 내보냅니다(export).

이 외에도 `bb.utils`에는 파일 체크섬 계산(`md5_file`, `sha256_file`), 파일 복사 및 이동, 버전 비교 등 다양한 헬퍼 함수들이 포함되어 있습니다.
