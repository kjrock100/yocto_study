# 압축 해제 (The Unpack)

`do_fetch` 태스크가 소스 파일을 다운로드 디렉토리(`DL_DIR`)로 가져온 후, `do_unpack` 태스크는 이 파일들을 작업 디렉토리(`WORKDIR`)로 압축 해제하거나 복사하여 빌드 준비를 마칩니다.

## 6.2.1 do_unpack 태스크

이 태스크는 `SRC_URI`에 지정된 각 파일을 처리합니다. 파일의 유형에 따라 처리 방식이 다릅니다.

*   **압축 아카이브 (`.tar`, `.tar.gz`, `.zip` 등)**: 자동으로 압축이 해제되어 `WORKDIR` 내에 풀립니다. 만약 아카이브가 최상위 디렉토리를 포함하고 있다면, 그 디렉토리가 `WORKDIR` 아래에 생성됩니다.
*   **버전 관리 시스템 (Git, SVN 등)**: 해당 저장소의 소스 코드가 체크아웃됩니다.
*   **일반 파일 (`.conf`, `.patch`, 스크립트 등)**: 단순히 `WORKDIR`로 복사됩니다.

## 6.2.2 소스 디렉토리 (S)

`S` 변수는 압축 해제된 소스 코드가 위치하는 디렉토리를 가리킵니다.

*   **기본값**: `${WORKDIR}/${BP}` (즉, `${WORKDIR}/${BPN}-${PV}`)
*   **설정 필요성**: 많은 오픈 소스 프로젝트의 타르볼(tarball)은 `프로젝트명-버전` 형태의 디렉토리를 포함하고 있어 기본값이 잘 작동합니다. 하지만 소스 코드가 `WORKDIR`에 바로 풀리거나 다른 이름의 디렉토리에 풀리는 경우, 레시피에서 `S` 변수를 올바르게 설정해야 합니다.

```bitbake
# 소스가 최상위 디렉토리 없이 바로 풀리는 경우
S = "${WORKDIR}"

# 소스가 'source'라는 디렉토리에 풀리는 경우
S = "${WORKDIR}/source"
```

## 6.2.3 특정 위치로 압축 해제

`SRC_URI` 파라미터를 사용하여 압축 해제 위치를 제어할 수 있습니다.

*   **`subdir`**: 파일을 `WORKDIR` 내의 특정 하위 디렉토리에 압축 해제합니다. 여러 소스를 합쳐야 할 때 유용합니다.

```bitbake
SRC_URI = "http://example.com/file.tar.gz;subdir=my-subdir"
```

*   **`unpack`**: `unpack=0` 또는 `unpack=false`로 설정하면, 해당 파일은 압축 해제되지 않고 그대로 `WORKDIR`에 복사됩니다. (예: 아카이브 파일 자체를 설치해야 하는 경우)

```bitbake
SRC_URI = "file://archive.tar.gz;unpack=0"
```
