# 다운로드 (The Download - Fetch)

BitBake 빌드 프로세스의 첫 번째 주요 단계는 `do_fetch` 태스크를 통해 필요한 모든 소스 코드를 가져오는 것입니다. 이 과정은 레시피의 `SRC_URI` 변수에 의해 제어됩니다.

## 6.1.1 SRC_URI 변수

`SRC_URI`는 소스 코드, 패치, 설정 파일 등 빌드에 필요한 모든 리소스의 위치를 지정하는 URI(Uniform Resource Identifier) 목록입니다. 공백으로 구분된 여러 URI를 포함할 수 있습니다.

```bitbake
SRC_URI = "https://www.example.com/my-software-${PV}.tar.gz \
           file://my-config-file.conf \
           file://0001-fix-a-bug.patch"
```

## 6.1.2 do_fetch 태스크

`do_fetch` 태스크는 `SRC_URI`에 나열된 모든 항목을 순서대로 처리하여 로컬 머신으로 다운로드합니다.

*   **동작**: URI의 프로토콜(예: `http://`, `git://`, `file://`)을 분석하여 적절한 페처(Fetcher)를 호출합니다.
*   **결과**: 다운로드된 파일은 `DL_DIR` 디렉토리에 저장됩니다.

## 6.1.3 DL_DIR (다운로드 디렉토리)

`DL_DIR`은 다운로드된 소스 코드 아카이브가 저장되는 중앙 캐시 디렉토리입니다.
*   **중복 방지**: BitBake는 파일을 다운로드하기 전에 먼저 `DL_DIR`에 해당 파일이 이미 있는지 확인합니다. 파일이 존재하고 체크섬이 유효하면 다시 다운로드하지 않아 빌드 시간을 단축하고 네트워크 사용량을 줄입니다.
*   **설정**: 이 경로는 일반적으로 `conf/local.conf` 파일에서 설정됩니다.

## 6.1.4 무결성 검증 (Checksum Verification)

소스 코드의 무결성과 재현성을 보장하기 위해, BitBake는 다운로드된 파일의 체크섬을 검증합니다.
*   **`SRC_URI[<checksum_type>]`**: `SRC_URI`에 `md5sum` 또는 `sha256sum`과 같은 파라미터를 추가하여 예상 체크섬 값을 지정해야 합니다.
*   **검증 실패**: 다운로드된 파일의 실제 체크섬이 레시피에 명시된 값과 다를 경우, `do_fetch` 태스크는 실패하고 빌드가 중단됩니다.

```bitbake
SRC_URI = "https://www.example.com/my-software-1.0.tar.gz;sha256sum=abcdef123..."
```
