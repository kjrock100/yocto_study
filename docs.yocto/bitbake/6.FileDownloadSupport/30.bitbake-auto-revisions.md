# 자동 리비전 (Auto Revisions)

개발 초기 단계나 지속적인 통합(CI) 환경에서는 특정 고정된 커밋 해시 대신, 원격 저장소의 최신 변경 사항을 항상 반영하고 싶을 때가 있습니다. BitBake는 이를 위해 `AUTOREV` 기능을 제공합니다.

## 6.4.1 사용법 (Usage)

`SRCREV` 변수의 값으로 `${AUTOREV}`를 설정하면 됩니다.

```bitbake
SRCREV = "${AUTOREV}"
SRC_URI = "git://example.com/my-repo.git;protocol=https;branch=main"
```

이렇게 설정하면 BitBake는 빌드 시점마다 원격 저장소에 접속하여 지정된 브랜치(`main`)의 가장 최신 커밋 해시를 확인하고 다운로드합니다.

## 6.4.2 동작 방식 (How it works)

1.  `do_fetch` 단계에서 BitBake는 네트워크를 통해 원격 저장소의 최신 리비전을 조회합니다.
2.  새로운 리비전이 있다면 이를 다운로드하고, `SRCREV` 값을 해당 리비전으로 내부적으로 업데이트합니다.
3.  이후 `do_unpack`, `do_patch` 등의 과정은 일반적인 고정 리비전 빌드와 동일하게 진행됩니다.

## 6.4.3 주의사항 (Caveats)

`AUTOREV`는 편리하지만 몇 가지 중요한 단점이 있어 프로덕션 빌드나 릴리스 빌드에서는 권장되지 않습니다.

*   **재현성 부족 (Lack of Reproducibility)**: 빌드할 때마다 소스 코드가 달라질 수 있으므로, 동일한 빌드 환경에서도 다른 결과물이 나올 수 있습니다. 나중에 특정 시점의 빌드를 다시 재현하기 어렵습니다.
*   **네트워크 의존성 (Network Dependency)**: 최신 리비전을 확인하기 위해 항상 원격 저장소에 접근해야 하므로, 오프라인 빌드가 불가능하거나 네트워크 상태에 따라 빌드가 실패할 수 있습니다.
*   **캐시 효율성 저하**: 소스 코드가 자주 바뀌므로 Sstate 캐시의 재사용률이 떨어지고 빌드 시간이 늘어날 수 있습니다.

따라서 개발 중에는 `AUTOREV`를 사용하더라도, 최종 릴리스 시점에는 구체적인 커밋 해시로 `SRCREV`를 고정하는 것이 좋습니다.
