# Yocto Project 기존 레시피 수정 (Modifying an Existing Recipe)

`devtool modify`를 통해 워크스페이스에 소스 코드가 준비되었다면, 이제 실제 코드를 수정하고 빌드하여 테스트하는 과정을 진행할 수 있습니다. 이 문서는 소스 코드 수정부터 타겟 배포까지의 워크플로우를 설명합니다.

## 1. 소스 코드 수정 (Editing Source Code)

`devtool modify` 명령을 실행하면 `build/workspace/sources/<recipe>` 디렉토리에 소스 코드가 추출됩니다. 선호하는 에디터를 사용하여 이 디렉토리 내의 파일을 직접 수정합니다.

```bash
cd build/workspace/sources/<recipe>
# 파일 수정 (예: vi main.c)
```

## 2. 빌드 (Building)

소스 코드를 수정한 후, 변경 사항이 올바르게 컴파일되는지 확인하기 위해 전체 이미지를 다시 굽지 않고 해당 레시피만 빠르게 빌드할 수 있습니다.

```bash
devtool build <recipe>
```

*   이 명령은 워크스페이스의 변경된 소스를 사용하여 컴파일(`do_compile`) 및 패키징 작업을 수행합니다.

## 3. 타겟 장비에 배포 (Deploying to Target)

빌드가 성공했다면, 변경된 패키지를 실행 중인 타겟 장비(QEMU 또는 실제 보드)에 배포하여 테스트할 수 있습니다.

```bash
devtool deploy-target <recipe> <target-address>
```

*   **`<target-address>`**: `root@192.168.7.2`와 같은 형식(SSH 접속 가능 주소)입니다.
*   이 명령은 SSH를 통해 파일을 타겟 장비에 복사하고 설치합니다.

## 4. 변경 사항 커밋 (Committing Changes)

수정이 완료되고 테스트가 통과했다면, 변경 사항을 Git 커밋으로 저장해야 합니다. `devtool`은 이 커밋들을 나중에 패치 파일로 변환하여 레시피에 적용합니다.

```bash
cd build/workspace/sources/<recipe>
git add .
git commit -m "Fix specific issue in main.c"
```

*   여러 개의 커밋을 만들 수 있으며, 각 커밋은 나중에 별도의 패치 파일(`.patch`)로 생성되어 레시피의 `SRC_URI`에 추가됩니다.

---
*참고: 모든 작업이 완료되면 `devtool finish` 명령을 사용하여 변경 사항을 레이어에 영구적으로 적용해야 합니다.*
