# Yocto Project 워크스페이스 레이어에 새 레시피 추가 (Adding a New Recipe to the Workspace Layer)

`devtool add` 명령어를 사용하여 새로운 레시피를 생성하고 워크스페이스 레이어에 추가하는 방법에 대해 설명합니다. 이 과정은 새로운 소프트웨어를 Yocto 빌드 시스템에 통합하는 첫 단계입니다.

## 1. 개요

`devtool add` 명령은 지정된 소스 코드(로컬 또는 원격)를 기반으로 자동으로 레시피(`.bb`)를 생성하고, 이를 `build/workspace/recipes` 디렉토리에 배치합니다. 또한 소스 코드를 `build/workspace/sources`로 추출하여 즉시 수정 및 빌드 가능한 상태로 만듭니다.

## 2. 기본 사용법

```bash
devtool add [options] [recipename] source-url [srctree]
```

*   **recipename:** 생성할 레시피의 이름 (선택 사항, 지정하지 않으면 소스 URL에서 유추).
*   **source-url:** 소스 코드의 위치 (Git 저장소, tarball URL, 또는 로컬 디렉토리).
*   **srctree:** 소스 코드가 추출될 로컬 경로 (선택 사항, 지정하지 않으면 `build/workspace/sources/<recipename>` 사용).

## 3. 주요 시나리오

### 3.1 원격 소스 사용 (Remote Source)
Git 저장소나 웹상의 Tarball을 사용하여 레시피를 생성하는 경우입니다.

```bash
# Git 저장소에서 레시피 생성
devtool add my-package git://github.com/myuser/my-package.git

# Tarball에서 레시피 생성
devtool add my-package http://example.com/downloads/my-package-1.0.tar.gz
```
이 경우 `devtool`은 소스를 다운로드하고, 압축을 해제(또는 clone)한 후, 빌드 시스템(Autotools, CMake, Meson 등)을 자동 감지하여 적절한 레시피 템플릿을 생성합니다.

### 3.2 로컬 소스 사용 (Local Source)
이미 로컬에 존재하는 소스 코드를 사용하여 레시피를 생성하는 경우입니다.

```bash
devtool add my-local-app /home/user/projects/my-local-app
```
이 경우 `devtool`은 해당 디렉토리를 소스 트리로 사용하도록 설정하며, `EXTERNALSRC` 기능을 활용하여 소스 위치를 가리킵니다.

## 4. 결과물

명령이 성공적으로 실행되면 다음과 같은 결과가 생성됩니다.

1.  **레시피 파일:** `build/workspace/recipes/<recipename>/` 디렉토리에 `.bb` 파일이 생성됩니다.
2.  **소스 트리:** 지정한 `srctree` (또는 기본 경로)에 소스 코드가 준비됩니다.
3.  **레이어 설정:** `build/workspace/conf/layer.conf`에 해당 레시피가 등록되어 빌드 시 우선순위를 갖게 됩니다.

이후 `devtool build <recipename>` 명령을 통해 즉시 빌드를 테스트할 수 있습니다.

---
*참고: `devtool add`는 빌드 시스템 유형을 자동으로 감지하려고 시도하지만, 복잡한 프로젝트의 경우 생성된 레시피를 수동으로 수정(`devtool edit-recipe`)해야 할 수도 있습니다.*
