# Yocto Project 작업 (Tasks)

Yocto Project의 빌드 엔진인 BitBake는 레시피 파일(`.bb`)에 정의된 일련의 **작업(Tasks)**을 실행하여 소프트웨어를 빌드합니다. 모든 작업 함수는 `do_` 접두사로 시작합니다.

## 1. 일반적인 레시피 빌드 작업 (Normal Recipe Build Tasks)

대부분의 소프트웨어 패키지 빌드 시 실행되는 표준 작업 흐름입니다.

*   **`do_fetch`**: `SRC_URI`에 지정된 소스 코드(Git 저장소, Tarball 등)를 다운로드합니다.
*   **`do_unpack`**: 다운로드한 소스 코드의 압축을 작업 디렉토리(`WORKDIR`) 내의 소스 디렉토리(`S`)로 해제합니다.
*   **`do_patch`**: `SRC_URI`에 지정된 패치 파일(`.patch`, `.diff`)들을 소스 코드에 적용합니다.
*   **`do_configure`**: 소스 코드를 빌드하기 위한 설정을 수행합니다. (예: `./configure`, `cmake`, `meson` 실행).
*   **`do_compile`**: 소스 코드를 컴파일합니다. (예: `make` 실행).
*   **`do_install`**: 컴파일된 바이너리, 라이브러리, 문서 등을 대상 디렉토리(`D`)로 복사합니다. 이 디렉토리는 나중에 패키징의 기준이 됩니다.
*   **`do_populate_sysroot`**: 다른 레시피가 이 패키지의 라이브러리나 헤더 파일을 사용할 수 있도록, 파일들을 스테이징 영역(Sysroot)에 복사합니다.
*   **`do_package`**: `D` 디렉토리의 파일들을 분석하여 패키지별로 분류하고, 디버그 심볼을 분리하는 등의 패키징 전처리를 수행합니다.
*   **`do_package_write_*`**: 실제 패키지 파일(`.rpm`, `.deb`, `.ipk`)을 생성합니다.

## 2. 수동으로 호출하는 작업 (Manually Called Tasks)

사용자가 `bitbake` 명령어를 통해 직접 호출하는 경우가 많은 작업들입니다.

*   **`do_clean`**: 해당 레시피의 작업 디렉토리(`WORKDIR`)를 삭제합니다. 빌드를 처음부터 다시 시작하고 싶을 때 사용합니다.
    ```bash
    bitbake -c clean <recipe-name>
    ```
*   **`do_cleansstate`**: 작업 디렉토리뿐만 아니라 **공유 상태 캐시(SState Cache)**까지 삭제합니다. 패키지를 완전히 깨끗한 상태에서 다시 빌드해야 할 때 강력한 초기화 방법입니다.
*   **`do_devshell`**: 크로스 컴파일 환경 변수(CC, LD, PATH 등)가 설정된 새로운 쉘 터미널을 엽니다. 개발자가 직접 소스 디렉토리에서 컴파일 명령을 실행해보거나 디버깅할 때 매우 유용합니다.
    ```bash
    bitbake -c devshell <recipe-name>
    ```
*   **`do_listtasks`**: 해당 레시피에서 실행 가능한 모든 작업의 목록을 출력합니다.

## 3. 이미지 관련 작업 (Image-Related Tasks)

이미지 레시피(예: `core-image-minimal`)에서 실행되는 작업들입니다.

*   **`do_rootfs`**: 이미지에 포함될 패키지들을 설치하여 루트 파일시스템 디렉토리 구조를 생성합니다.
*   **`do_image`**: 생성된 루트 파일시스템을 기반으로 실제 이미지 파일 전처리를 수행합니다.
*   **`do_image_complete`**: 최종적으로 플래싱 가능한 이미지 파일(예: `.wic`, `.ext4`, `.tar.bz2`)을 생성합니다.

## 4. 커널 관련 작업 (Kernel-Related Tasks)

리눅스 커널 레시피(`linux-yocto` 등)에서 사용되는 특수 작업들입니다.

*   **`do_menuconfig`**: 커널 설정을 변경할 수 있는 그래픽 인터페이스(Menuconfig)를 실행합니다.
    ```bash
    bitbake -c menuconfig virtual/kernel
    ```
*   **`do_savedefconfig`**: 현재 커널 설정을 최소한의 `defconfig` 파일로 저장합니다.

---
*참고: 작업의 실행 순서와 의존성은 BitBake에 의해 자동으로 관리됩니다.*
