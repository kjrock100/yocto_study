# Yocto Project 기능 백필링 (Feature Backfilling)

Yocto Project에서 **기능 백필링(Feature Backfilling)**은 새로운 릴리스에서 기본 기능 구성이 변경되었을 때, 기존 설정과의 호환성을 유지하기 위한 메커니즘입니다.

## 1. 개요

Yocto Project가 발전함에 따라, 이전에 기본적으로 포함되던 특정 기능(`DISTRO_FEATURES`)이 더 이상 기본값이 아니게 되는 경우가 있습니다. 예를 들어, 특정 오디오 시스템이나 라이브러리 지원이 선택 사항으로 변경될 수 있습니다.

이때 기존 설정 파일(`local.conf`나 배포판 설정)을 수정하지 않고 그대로 사용하는 사용자들이 갑자기 기능이 사라져 빌드 오류를 겪거나 런타임 동작이 바뀌는 것을 방지하기 위해, 시스템은 자동으로 해당 기능을 다시 추가(Backfill)해줍니다.

## 2. 작동 원리

BitBake 설정 파일(`meta/conf/bitbake.conf` 등)에는 `DISTRO_FEATURES_BACKFILL`이라는 변수가 정의되어 있습니다. 이 변수에는 "이전에는 기본이었으나 지금은 제외된 기능들"의 목록이 들어있습니다.

빌드 시스템은 `DISTRO_FEATURES` 변수를 구성할 때, `DISTRO_FEATURES_BACKFILL`에 있는 기능들을 자동으로 추가합니다.

## 3. 백필링 제어 (비활성화 방법)

만약 새로운 Yocto 버전의 변경 사항을 받아들이고, 백필링된 기능을 사용하고 싶지 않다면 `DISTRO_FEATURES_BACKFILL_CONSIDERED` 변수를 사용해야 합니다.

이 변수에 특정 기능 이름을 추가하면, 빌드 시스템은 "사용자가 이 기능이 빠진 것을 인지하고 고려(Considered)했음"으로 간주하여 백필링을 수행하지 않습니다.

### 예시: Pulseaudio 제거

과거에는 `pulseaudio`가 기본적으로 포함되었으나, 최신 버전에서는 제외되었다고 가정해 봅시다.

1.  **기본 동작:** 아무런 설정을 하지 않으면 `DISTRO_FEATURES_BACKFILL`에 의해 `pulseaudio`가 자동으로 `DISTRO_FEATURES`에 추가됩니다.
2.  **제거 설정:** `pulseaudio`를 정말로 사용하지 않으려면 다음과 같이 설정합니다.

```bitbake
DISTRO_FEATURES_BACKFILL_CONSIDERED += "pulseaudio"
```

이렇게 하면 `pulseaudio`는 `DISTRO_FEATURES`에 자동으로 추가되지 않습니다.

## 4. 주요 백필링 기능 예시

버전에 따라 다르지만, 흔히 볼 수 있는 백필링 항목들은 다음과 같습니다.

*   **`pulseaudio`**: 사운드 서버.
*   **`ldconfig`**: 공유 라이브러리 캐시 설정 도구.
*   **`gobject-introspection-data`**: GObject Introspection 데이터 생성.
*   **`sysvinit`**: System V 초기화 시스템 (systemd로 전환되는 추세에 따라).

## 5. 요약

*   **`DISTRO_FEATURES_BACKFILL`**: 호환성을 위해 자동으로 추가되는 기능 목록.
*   **`DISTRO_FEATURES_BACKFILL_CONSIDERED`**: 백필링을 원하지 않을 때, 해당 기능을 명시하여 자동 추가를 막는 변수.
