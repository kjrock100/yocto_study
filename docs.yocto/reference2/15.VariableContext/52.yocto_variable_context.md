# Yocto Project 변수 컨텍스트 (Variable Context)

Yocto Project에서 변수는 정의되는 위치에 따라 그 범위(Scope)와 수명(Lifetime)이 결정됩니다. 이를 **변수 컨텍스트(Variable Context)**라고 합니다. 크게 **설정(Configuration)** 컨텍스트와 **레시피(Recipe)** 컨텍스트로 나뉩니다.

## 1. 설정 컨텍스트 (Configuration Context)

설정 컨텍스트에서 정의된 변수는 **전역(Global)** 범위를 가집니다. 즉, 모든 레시피와 빌드 작업에서 참조할 수 있습니다.

### 1.1 주요 설정 파일
*   `conf/local.conf`: 사용자가 직접 설정하는 로컬 빌드 설정입니다.
*   `conf/bblayers.conf`: 레이어 경로를 정의합니다.
*   `conf/distro/*.conf`: 배포판(Distribution) 정책을 정의합니다 (예: `poky.conf`).
*   `conf/machine/*.conf`: 타겟 하드웨어(Machine) 설정을 정의합니다 (예: `raspberrypi4.conf`).
*   `conf/bitbake.conf`: BitBake의 기본 설정입니다.

### 1.2 특징
*   빌드 시작 시 파싱되어 모든 레시피 파싱 이전에 값이 확정됩니다.
*   모든 레시피에서 `${VARNAME}` 형태로 참조할 수 있습니다.
*   예시: `DL_DIR`, `SSTATE_DIR`, `DISTRO`, `MACHINE`, `TMPDIR`

## 2. 레시피 컨텍스트 (Recipe Context)

레시피 컨텍스트에서 정의된 변수는 해당 **레시피 내에서만** 유효한 **지역(Local)** 범위를 가집니다.

### 2.1 주요 파일
*   `recipes-*/*/*.bb`: 레시피 파일.
*   `recipes-*/*/*.bbappend`: 레시피 확장 파일.

### 2.2 특징
*   각 레시피는 독립적인 네임스페이스를 가집니다. A 레시피에서 정의한 변수는 B 레시피에 영향을 주지 않습니다.
*   설정 컨텍스트의 변수를 참조할 수 있습니다.
*   예시: `PN`, `PV`, `SRC_URI`, `DEPENDS`, `RDEPENDS`, `S`, `B`, `D`

## 3. 컨텍스트 간의 관계

1.  **상속:** 레시피는 설정 컨텍스트의 변수를 읽을 수 있습니다.
    *   예: 레시피에서 `WORKDIR` (설정 변수)를 사용하여 경로를 지정.
2.  **격리:** 레시피에서 설정 변수와 같은 이름의 변수를 변경하더라도, 이는 해당 레시피 내에서만 적용되며 전역 설정이나 다른 레시피에는 영향을 주지 않습니다.

## 4. 요약

| 특징 | 설정 컨텍스트 (Configuration) | 레시피 컨텍스트 (Recipe) |
| :--- | :--- | :--- |
| **범위** | 전역 (Global) | 지역 (Local) |
| **정의 위치** | `.conf` 파일 (`local.conf`, `machine.conf` 등) | `.bb`, `.bbappend` 파일 |
| **영향** | 전체 빌드 시스템 및 모든 레시피 | 해당 레시피의 빌드 과정 |
| **주요 변수** | `DL_DIR`, `TMPDIR`, `DISTRO`, `MACHINE` | `PN`, `PV`, `SRC_URI`, `DEPENDS` |

---
*참고: 변수의 값이 어디서 설정되었는지 확인하려면 `bitbake -e <recipe> | grep ^VARNAME` 명령을 사용할 수 있습니다.*
