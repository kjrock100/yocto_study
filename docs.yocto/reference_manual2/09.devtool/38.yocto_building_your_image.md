# Yocto Project 이미지 빌드 (Building Your Image)

Yocto Project에서 `devtool build-image` 명령어를 사용하여 워크스페이스의 변경 사항을 포함한 전체 시스템 이미지를 빌드하는 방법에 대해 설명합니다.

## 1. 개요

`devtool build`가 개별 레시피를 컴파일하고 패키징하는 데 초점을 맞춘다면, `devtool build-image`는 작업 중인 레시피를 포함하여 부팅 가능한 전체 파일시스템 이미지를 생성합니다. 이를 통해 수정된 소프트웨어가 전체 시스템 환경에서 올바르게 작동하는지 통합 테스트를 수행할 수 있습니다.

## 2. 기본 사용법

```bash
devtool build-image <image>
```

*   **`<image>`**: 빌드할 이미지 레시피의 이름입니다 (예: `core-image-minimal`, `core-image-sato`).

## 3. 주요 특징

*   **자동 포함:** 워크스페이스(`build/workspace`)에 있는 레시피들이 생성하는 패키지들이 최종 이미지에 자동으로 추가됩니다. 이미지 레시피의 `IMAGE_INSTALL` 변수를 수동으로 수정할 필요가 없습니다.
*   **통합 검증:** 라이브러리나 시스템 서비스를 수정한 경우, 의존성 문제나 부팅 과정에서의 동작을 검증하기 위해 전체 이미지를 빌드해야 할 때 유용합니다.

## 4. 주요 옵션

### 4.1 추가 패키지 지정 (`--package`, `-p`)
워크스페이스에 있는 레시피 외에, 이미지에 추가로 포함하고 싶은 패키지가 있다면 이 옵션을 사용합니다.

```bash
devtool build-image core-image-minimal -p vim
```
위 명령은 `core-image-minimal` 이미지를 빌드하면서 워크스페이스의 레시피들과 `vim` 패키지를 함께 설치합니다.

## 5. `bitbake`와의 차이점

*   **`bitbake <image>`**: 워크스페이스 레이어가 `bblayers.conf`에 포함되어 있다면 워크스페이스의 레시피를 사용하여 빌드합니다. 하지만, 해당 패키지가 이미지 레시피의 의존성 트리에 포함되어 있지 않다면 최종 이미지에는 설치되지 않을 수 있습니다.
*   **`devtool build-image <image>`**: 워크스페이스의 패키지들을 이미지에 강제로 포함시킵니다 (`IMAGE_INSTALL`에 append). 따라서 테스트 목적으로 이미지를 생성할 때 훨씬 편리합니다.

---
*참고: 빌드된 이미지는 `tmp/deploy/images/<machine>/` 디렉토리에 생성됩니다.*
