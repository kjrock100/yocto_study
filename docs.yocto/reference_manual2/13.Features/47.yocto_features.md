# Yocto Project 기능 (Features)

Yocto Project는 빌드 구성을 세밀하게 제어하기 위해 다양한 레벨의 "기능(Features)" 변수를 제공합니다. 주요 기능 변수로는 `MACHINE_FEATURES`, `DISTRO_FEATURES`, `IMAGE_FEATURES`가 있습니다.

## 1. 개요

이 변수들은 하드웨어의 능력, 배포판의 정책, 그리고 최종 이미지의 구성을 정의하는 데 사용됩니다. 레시피나 클래스 파일들은 이 변수들을 확인하여 조건부로 패키지를 포함하거나 컴파일 옵션을 조정합니다.

## 2. 머신 기능 (Machine Features)

**`MACHINE_FEATURES`** 변수는 타겟 하드웨어가 지원하는 기능을 설명합니다. 주로 BSP(Board Support Package) 레이어의 머신 설정 파일(`conf/machine/<machine>.conf`)에서 정의됩니다.

*   **역할:** 하드웨어 의존적인 패키지(드라이버, 펌웨어 등)를 자동으로 설치하거나, 소프트웨어의 하드웨어 가속 기능을 활성화하는 데 사용됩니다.
*   **주요 예시:**
    *   `alsa`: 오디오 지원
    *   `bluetooth`: 블루투스 하드웨어 지원
    *   `screen`: 디스플레이 출력 지원
    *   `touchscreen`: 터치스크린 지원
    *   `usbhost`: USB 호스트 기능 지원
    *   `wifi`: 무선 LAN 하드웨어 지원
    *   `pci`, `ext2`, `vfat`: 특정 버스나 파일시스템 지원

## 3. 배포판 기능 (Distro Features)

**`DISTRO_FEATURES`** 변수는 배포판(Distribution) 전체의 소프트웨어 정책을 정의합니다. 주로 배포판 설정 파일(`conf/distro/<distro>.conf`)이나 `local.conf`에서 설정됩니다.

*   **역할:** 시스템 전반에 걸친 기능(초기화 시스템, 그래픽 스택 등)을 결정합니다. 하드웨어가 기능을 지원하더라도(`MACHINE_FEATURES`), 배포판 정책에서 이를 비활성화하면 해당 기능은 소프트웨어 스택에서 제외될 수 있습니다.
*   **주요 예시:**
    *   `systemd` / `sysvinit`: 초기화 시스템 선택
    *   `x11` / `wayland`: 윈도우 시스템 선택
    *   `opengl`: OpenGL 그래픽 가속 지원
    *   `nfs`: NFS 클라이언트/서버 지원
    *   `wifi`, `bluetooth`: 해당 기술의 소프트웨어 스택 지원 (하드웨어 지원과 별개)
    *   `virtualization`: 가상화 지원 (KVM 등)

> **참고:** `COMBINED_FEATURES` 변수는 `MACHINE_FEATURES`와 `DISTRO_FEATURES` 모두에 포함된 기능들의 교집합을 담고 있습니다.

## 4. 이미지 기능 (Image Features)

**`IMAGE_FEATURES`** 변수는 생성되는 특정 이미지에 포함될 패키지 그룹이나 설정을 정의합니다. 이미지 레시피(`.bb`) 또는 `local.conf`에서 설정합니다.

*   **역할:** 최종 루트 파일시스템에 설치될 패키지 묶음(Package Groups)을 쉽게 추가하거나, 이미지 생성 시의 특정 동작을 제어합니다.
*   **주요 예시:**
    *   `ssh-server-openssh` / `ssh-server-dropbear`: SSH 서버 설치
    *   `debug-tweaks`: 개발용 디버깅 설정 (루트 비밀번호 없음 등)
    *   `package-management`: 타겟 장비에서 패키지 관리자(dnf, opkg, apt) 사용 가능
    *   `read-only-rootfs`: 루트 파일시스템을 읽기 전용으로 마운트
    *   `tools-debug`: gdb, strace 등 디버깅 도구 포함
    *   `tools-sdk`: 타겟 장비에서 개발 가능한 SDK 도구(gcc, make 등) 포함

## 5. 기능 백필링 (Feature Backfilling)

**`DISTRO_FEATURES_BACKFILL`**은 새로운 버전의 Yocto Project에서 기본값이 변경되었을 때, 기존 설정과의 호환성을 유지하기 위해 자동으로 추가되는 기능들을 관리합니다.

*   예를 들어, `pulseaudio`가 기본 기능에서 제외되었을 때, 기존 설정을 사용하는 사용자를 위해 백필링 변수를 통해 자동으로 추가될 수 있습니다.
*   특정 백필링 기능을 원하지 않는 경우 `DISTRO_FEATURES_BACKFILL_CONSIDERED` 변수에 해당 기능을 추가하여 무시할 수 있습니다.
