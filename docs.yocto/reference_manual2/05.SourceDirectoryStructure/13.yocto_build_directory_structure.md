# Yocto Project 빌드 디렉토리 (Build Directory) 구조

Yocto Project에서 `build/` 디렉토리는 실제 빌드 작업이 수행되고 모든 결과물이 저장되는 공간입니다. `oe-init-build-env` 스크립트를 실행하면 생성되며, 사용자는 이 디렉토리 내에서 `bitbake` 명령을 실행합니다.

## 1. 주요 구성 요소

### `conf/` (Configuration)
빌드 환경을 제어하는 설정 파일들이 위치합니다.
*   **`local.conf`**: 타겟 머신(`MACHINE`), 병렬 빌드 옵션, 디스크 공간 관리, 패키지 관리자 등 로컬 빌드 환경에 대한 설정을 정의합니다.
*   **`bblayers.conf`**: 빌드에 참여할 레이어(Layer)들의 경로를 정의합니다.

### `downloads/`
업스트림 소스(소스 코드 tarball, git 저장소 복제본 등)가 다운로드되어 저장되는 디렉토리입니다. `DL_DIR` 변수로 위치를 변경할 수 있으며, 여러 빌드 디렉토리 간에 공유하여 다운로드 시간을 절약할 수 있습니다.

### `sstate-cache/` (Shared State Cache)
빌드 속도를 높이기 위한 캐시 데이터가 저장됩니다. 이전에 빌드된 패키지의 상태를 저장하여, 변경되지 않은 패키지는 다시 빌드하지 않고 재사용할 수 있게 합니다. `SSTATE_DIR` 변수로 위치를 지정합니다.

### `tmp/` (Temporary Directory)
빌드 과정에서 생성되는 임시 파일, 컴파일 결과물, 최종 이미지 등이 저장되는 거대한 디렉토리입니다.

## 2. `tmp/` 디렉토리 상세 구조

`tmp/` 디렉토리 내부에는 다음과 같은 중요한 하위 디렉토리들이 있습니다.

### `tmp/deploy/`
빌드의 **최종 결과물**이 저장되는 곳입니다. 가장 자주 확인하게 될 디렉토리입니다.
*   **`images/`**: 타겟 머신을 위한 부트로더, 커널, 루트 파일시스템 이미지가 저장됩니다. (예: `tmp/deploy/images/qemux86-64/`)
*   **`rpm/`, `deb/`, `ipk/`**: 빌드된 소프트웨어 패키지들이 패키지 매니저 형식별로 저장됩니다.
*   **`sdk/`**: 애플리케이션 개발을 위한 크로스 컴파일 툴체인(SDK) 설치 스크립트가 생성됩니다.

### `tmp/work/`
각 레시피(패키지)별로 실제 컴파일 및 빌드 작업이 수행되는 **작업 공간**입니다.
*   **구조:** `tmp/work/<architecture>/<recipe-name>/<version>/`
*   **용도:** 소스 압축 해제, 패치 적용, 컴파일(`do_compile`), 설치(`do_install`) 등의 로그(`temp/` 폴더 내)와 결과물을 확인할 수 있어 디버깅 시 매우 중요합니다.

### `tmp/sysroots-components/`
각 레시피가 빌드될 때 생성된 공유 라이브러리나 헤더 파일들이 저장되는 곳입니다. 다른 레시피가 의존성을 가질 때 이곳의 파일들을 참조하여 자신의 작업 공간(`recipe-sysroot`)으로 가져옵니다.

### `tmp/buildstats/`
빌드 성능 분석을 위한 통계 데이터(작업별 소요 시간, CPU/메모리 사용량 등)가 저장됩니다.

### `tmp/log/`
전역적인 빌드 로그가 저장될 수 있습니다.

### `tmp/stamps/`
각 작업(Task)의 완료 상태를 기록한 빈 파일(Stamp)들이 저장됩니다. BitBake는 이 파일들을 확인하여 어떤 작업을 다시 실행해야 할지 결정합니다.

---
*팁: `build/` 디렉토리는 언제든지 삭제하고 재생성할 수 있지만, `downloads/`와 `sstate-cache/` 디렉토리를 보존하거나 공유하면 재빌드 시간을 획기적으로 단축할 수 있습니다.*
