# OpenEmbedded Kickstart (`.wks`) 참조

## 8.1 소개

현재 Wic 구현은 기본 kickstart 분할 명령만 지원합니다: `partition` (약자로 `part`) 및 `bootloader`.

> **참고:** 향후 업데이트에서 더 많은 명령과 옵션이 구현될 예정입니다. 특별히 지원되지 않는 것을 사용하면 결과가 예측 불가능할 수 있습니다.

이 장은 사용 가능한 kickstart 명령에 대한 참조를 제공합니다. 정보는 명령, 해당 구문 및 의미를 나열합니다. Kickstart 명령은 Fedora kickstart 버전을 기반으로 하지만 Wic 기능을 반영하기 위해 수정되었습니다. 해당 명령에 대한 원본 설명서는 [https://pykickstart.readthedocs.io/en/latest/kickstart-docs.html](https://pykickstart.readthedocs.io/en/latest/kickstart-docs.html)에서 볼 수 있습니다.

## 8.2 명령: part 또는 partition

이 명령들은 시스템에 파티션을 생성하며 다음 구문을 사용합니다:

```
part [mntpoint]
partition [mntpoint]
```

mntpoint를 제공하지 않으면 Wic이 파티션을 생성하지만 마운트하지 않습니다.

`mntpoint`는 파티션이 마운트되는 위치이며 다음 중 하나의 형식이어야 합니다:

- `/path`: 예를 들어 "/", "/usr" 또는 "/home"
- `swap`: 생성된 파티션이 스왑 공간으로 사용됨

mntpoint를 지정하면 파티션이 자동으로 마운트됩니다. Wic은 이미지 생성 중에 파일 시스템 테이블(fstab)에 항목을 추가하여 이를 달성합니다. Wic이 유효한 fstab을 생성하려면 명령의 일부로 `--ondrive`, `--ondisk` 또는 `--use-uuid` 파티션 옵션 중 하나를 제공해야 합니다.

> **참고:** 마운트 프로그램은 `--use-uuid`와 루트가 아닌 마운트 포인트(스왑 포함)와 함께 사용하는 PARTUUID 구문을 이해해야 합니다.

예제 - "/" 를 마운트 포인트로 사용하는 명령이고 `--ondisk`를 사용하여 `sdb` 디스크에 파티션을 강제로 배치합니다:

```
part / --source rootfs --ondisk sdb --fstype=ext3 --label platform --align 1024
```

### part 및 partition 명령과 함께 지원되는 옵션:

#### `--size`

최소 파티션 크기입니다. 정수 값으로 지정하며, 선택적으로 다음 중 하나의 단위가 뒤따를 수 있습니다:

- "k" / "K" - kibibyte
- "M" - mebibyte
- "G" - gibibyte

기본 단위가 제공되지 않으면 "M"입니다. `--source`를 사용하는 경우 이 옵션이 필요하지 않습니다.

#### `--fixed-size`

정확한 파티션 크기입니다. 정수 값으로 지정하며, 선택적으로 다음 중 하나의 단위가 뒤따를 수 있습니다:

- "k" / "K" - kibibyte
- "M" - mebibyte
- "G" - gibibyte

기본 단위가 제공되지 않으면 "M"입니다. `--size`와 함께 지정할 수 없습니다. 파티션 데이터가 `--fixed-size`보다 크면 디스크 이미지를 조립할 때 오류가 발생합니다.

#### `--source`

이 옵션은 Wic 특정 옵션으로 파티션을 채우는 데이터의 소스 이름을 지정합니다. 이 옵션의 가장 일반적인 값은 "rootfs"이지만, 유효한 소스 플러그인에 매핑되는 모든 값을 사용할 수 있습니다.

`--source rootfs`를 사용하면 Wic은 필요한 크기의 파티션을 생성하고 `-r` 명령행 옵션이 가리키는 루트 파일시스템의 내용 또는 `-e` 명령행 옵션에서 파생된 동등한 루트 파일시스템으로 채웁니다. 파티션을 생성하는 데 사용되는 파일 시스템 유형은 파티션에 지정된 `--fstype` 옵션의 값으로 결정됩니다.

#### `--ondisk` 또는 `--ondrive`

파티션이 특정 디스크에서 생성되도록 강제합니다.

#### `--fstype`

파티션의 파일 시스템 유형을 설정합니다. 유효한 값은:

- `btrfs`
- `erofs`
- `ext2`
- `ext3`
- `ext4`
- `squashfs`
- `swap`
- `vfat`

#### `--fsoptions`

파일시스템을 마운트할 때 사용할 자유 형식의 옵션 문자열을 지정합니다. 이 문자열은 설치된 시스템의 `/etc/fstab` 파일에 복사되어야 하며 따옴표로 묶어야 합니다. 지정하지 않으면 기본 문자열은 "defaults"입니다.

#### `--label label`

파티션에 생성할 파일시스템에 지정할 레이블을 지정합니다. 주어진 레이블이 이미 다른 파일시스템에서 사용 중이면 파티션에 대해 새 레이블이 생성됩니다.

#### `--active`

파티션을 활성으로 표시합니다.

#### `--align (KBytes 단위)`

이 옵션은 Wic 특정 옵션으로 x KBytes로 지정된 경계에서 파티션을 시작한다는 것을 나타냅니다.

#### `--offset`

이 옵션은 Wic 특정 옵션으로 파티션을 정확하게 지정된 오프셋에 배치합니다. 파티션을 지정된 오프셋에 배치할 수 없으면 이미지 빌드가 실패합니다. 정수 값으로 지정하며, 선택적으로 다음 중 하나의 단위가 뒤따를 수 있습니다:

- "s" / "S" - 512 바이트 섹터
- "k" / "K" - kibibyte
- "M" - mebibyte
- "G" - gibibyte

기본 단위가 제공되지 않으면 "k"입니다.

#### `--no-table`

이 옵션은 Wic 특정 옵션입니다. 옵션을 사용하면 파티션의 공간을 예약하고 채워지게 합니다. 그러나 파티션은 파티션 테이블에 추가되지 않습니다.

#### `--exclude-path`

이 옵션은 Wic 특정 옵션으로 지정된 상대 경로를 결과 이미지에서 제외합니다. 이 옵션은 rootfs 소스 플러그인에서만 효과적입니다.

#### `--extra-space`

이 옵션은 Wic 특정 옵션으로 파티션 내용으로 채워진 공간 후에 추가 공간을 추가합니다. 최종 크기는 `--size` 옵션으로 지정된 크기를 초과할 수 있습니다. 기본값은 10M입니다. 정수 값으로 지정하며, 선택적으로 다음 중 하나의 단위가 뒤따를 수 있습니다:

- "k" / "K" - kibibyte
- "M" - mebibyte
- "G" - gibibyte

기본 단위가 제공되지 않으면 "M"입니다.

#### `--overhead-factor`

이 옵션은 Wic 특정 옵션으로 파티션의 크기에 옵션의 값을 곱합니다. "1" 이상의 값을 제공해야 합니다. 기본값은 "1.3"입니다.

#### `--part-name`

이 옵션은 Wic 특정 옵션으로 GPT 파티션에 대한 이름을 지정합니다.

#### `--part-type`

이 옵션은 Wic 특정 옵션으로 GPT 파티션에 대한 파티션 유형 전역 고유 식별자(GUID)를 지정합니다.

#### `--use-uuid`

이 옵션은 Wic 특정 옵션으로 Wic이 파티션에 대해 무작위 GUID를 생성하도록 합니다. 생성된 식별자는 루트 파티션을 지정하기 위해 부트로더 구성에서 사용됩니다.

#### `--uuid`

이 옵션은 Wic 특정 옵션으로 파티션 UUID를 지정합니다.

#### `--fsuuid`

이 옵션은 Wic 특정 옵션으로 파일시스템 UUID를 지정합니다. Wic을 실행하기 전에 부트로더 구성의 커널 명령 줄에 사전 구성된 파일시스템 UUID가 추가되면 이 옵션으로 `WKS_FILE`을 생성하거나 수정할 수 있습니다.

#### `--system-id`

이 옵션은 Wic 특정 옵션으로 파티션 시스템 ID를 지정하며, 이는 0x 접두사가 있거나 없는 1 바이트 길이의 16진수 매개변수입니다.

#### `--mkfs-extraopts`

이 옵션은 `mkfs` 유틸리티에 전달할 추가 옵션을 지정합니다.

## 8.3 명령: bootloader

이 명령은 부트로더가 어떻게 구성되어야 하는지를 지정하며 다음 옵션을 지원합니다:

> **참고:** 부트로더 기능 및 부트 파티션은 부트로더 기능을 구현하는 다양한 소스 플러그인에 의해 구현됩니다. 부트로더 명령은 본질적으로 부트로더 구성을 수정하는 수단을 제공합니다.

### 부트로더 명령 옵션:

#### `--append`

커널 매개변수를 지정합니다. 이 매개변수는 syslinux `APPEND` 또는 `grub` 커널 명령 줄에 추가됩니다.

#### `--configfile`

부트로더에 대한 사용자 정의 구성 파일을 지정합니다. 파일의 전체 경로명을 제공하거나 `canned-wks` 폴더에 있는 파일을 제공할 수 있습니다. 이 옵션은 다른 모든 부트로더 옵션을 재정의합니다.

#### `--ptable`

파티션 테이블 형식을 지정합니다. 유효한 값은:

- `msdos`
- `gpt`

#### `--timeout`

부트로더가 시간 초과되고 기본 옵션을 부팅하기 전의 초 단위 시간을 지정합니다.
