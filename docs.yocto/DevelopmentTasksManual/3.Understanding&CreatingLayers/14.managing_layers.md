# 레이어 관리 (Managing Layers)

Yocto Project 개발 중에는 수많은 레이어를 다루게 되며, 이를 효율적으로 관리하는 것이 중요합니다. `bitbake-layers` 스크립트는 레이어 구성을 검사하고 조작하기 위한 핵심 도구입니다. 이 문서는 레이어를 관리하는 주요 명령어와 기능을 설명합니다.

## 1. 레이어 정보 확인

현재 빌드 환경에 설정된 레이어와 레시피 정보를 확인하는 명령어들입니다.

- **레이어 목록 확인**:

  ```bash
  bitbake-layers show-layers
  ```

  현재 `bblayers.conf`에 설정된 레이어들의 경로와 우선순위(Priority)를 보여줍니다.

- **레시피 목록 확인**:

  ```bash
  bitbake-layers show-recipes
  ```

  사용 가능한 모든 레시피와 해당 레시피를 제공하는 레이어를 나열합니다. 특정 레시피를 검색하려면 인자로 레시피 이름을 전달합니다.

  ```bash
  bitbake-layers show-recipes "busybox"
  ```

- **오버레이된 레시피 확인**:

  ```bash
  bitbake-layers show-cross-recipes
  ```

  여러 레이어에서 동일한 레시피를 제공하는 경우(오버레이)를 찾아 보여줍니다. 어떤 레이어의 레시피가 실제로 빌드에 사용되는지 디버깅할 때 유용합니다.

- **bbappend 파일 확인**:

  ```bash
  bitbake-layers show-appends
  ```

  적용된 `.bbappend` 파일들과 해당 파일이 어떤 레시피에 영향을 미치는지 보여줍니다.

## 2. 레이어 추가 및 삭제

`conf/bblayers.conf` 파일을 직접 수정하지 않고 명령어로 레이어를 추가하거나 제거할 수 있습니다.

- **레이어 추가**:

  ```bash
  bitbake-layers add-layer <layer-path>
  ```

- **레이어 제거**:

  ```bash
  bitbake-layers remove-layer <layer-path>
  ```

## 3. 레이어 설정 저장 및 복원 (Saving and Restoring the Layers Setup)

팀원들과 동일한 레이어 구성을 공유하거나, 나중에 동일한 환경을 재구성하기 위해 현재 레이어 설정을 저장할 수 있습니다.

- **설정 저장**:

  ```bash
  bitbake-layers create-layers-setup <output-directory>
  ```

  이 명령은 현재 활성화된 레이어들의 Git 리비전 정보와 경로를 포함한 JSON 설정 파일과, 이를 복원할 수 있는 설정 스크립트(`setup-layers`)를 생성합니다. 이를 통해 정확히 동일한 버전의 레이어 구성을 재현할 수 있습니다.
