# bitbake-layers 스크립트를 사용한 일반 레이어 생성 (Creating a General Layer Using the bitbake-layers Script)

Yocto Project에서 레이어를 생성할 때 `bitbake-layers` 스크립트의 `create-layer` 서브 커맨드를 사용하면, Yocto Project의 표준을 준수하는 기본 레이어 구조를 자동으로 생성할 수 있습니다. 이를 통해 수동 생성 시 발생할 수 있는 오류를 줄이고 설정을 간소화할 수 있습니다.

## 1. 레이어 생성 명령어

`bitbake-layers create-layer` 명령어를 사용하여 새로운 레이어를 생성합니다. 인자로 생성할 레이어의 디렉토리 경로를 지정해야 합니다.

```bash
bitbake-layers create-layer <your-layer-path>
```

**예시**:

```bash
bitbake-layers create-layer ../meta-custom
```

이 명령은 빌드 디렉토리 상위(`../`)에 `meta-custom`이라는 이름의 레이어 디렉토리를 생성합니다.

## 2. 생성되는 레이어 구조

명령어가 성공적으로 실행되면 다음과 같은 파일과 디렉토리가 생성됩니다.

```text
meta-custom/
├── conf/
│   └── layer.conf
├── COPYING.MIT
├── recipes-example/
│   └── example/
│       └── example_0.1.bb
└── README
```

### 2.1. 주요 파일 설명

- **conf/layer.conf**: 레이어의 핵심 설정 파일입니다. `BBPATH`, `BBFILES` 경로 설정, 레이어 우선순위(`BBFILE_PRIORITY`), 호환되는 Yocto 릴리스(`LAYERSERIES_COMPAT`) 등이 자동으로 구성됩니다.
- **recipes-example/**: 예제 레시피가 포함된 디렉토리입니다. `example_0.1.bb` 파일은 레시피 작성의 기초 템플릿으로 활용할 수 있습니다.
- **COPYING.MIT**: 레이어의 라이선스 파일입니다. 기본적으로 MIT 라이선스가 포함되지만, 필요에 따라 변경할 수 있습니다.
- **README**: 레이어에 대한 설명을 작성하는 파일입니다. 의존성, 유지보수 담당자 정보 등을 기입해야 합니다.

## 3. 레이어 추가 (활성화)

레이어를 생성한 후에는 빌드 시스템이 이를 인식하도록 추가해야 합니다.

```bash
bitbake-layers add-layer ../meta-custom
```

이 명령은 `bblayers.conf` 파일을 업데이트하여 새 레이어를 빌드 환경에 포함시킵니다.
