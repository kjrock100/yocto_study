# Yocto Project: 간단한 이미지 빌드 (Building a Simple Image)

이 문서는 Yocto Project Development Tasks Manual의 14.1절을 기반으로, Yocto Project 빌드 환경을 설정하고 가장 기본적인 이미지를 빌드하는 과정을 설명합니다.

## 14.1 개요 (Overview)

Yocto Project 개발 과정에서 가장 먼저 수행하는 작업 중 하나는 이미지를 빌드하는 것입니다. 이 과정은 빌드 환경 초기화, 구성 설정, 그리고 실제 빌드 실행으로 나뉩니다.

## 14.1.1 빌드 환경 초기화 (Initializing the Build Environment)

빌드를 시작하기 전에 환경 변수와 작업 디렉토리를 설정해야 합니다. Yocto Project는 이를 위한 스크립트를 제공합니다.

* **명령어**:

    ```bash
    source oe-init-build-env [build_dir]
    ```

  * `[build_dir]`: 빌드 관련 파일들이 저장될 디렉토리 이름입니다. 생략 시 기본값은 `build`입니다.
  * 이 명령을 실행하면 현재 쉘의 환경 변수가 설정되고, 작업 디렉토리가 `build_dir`로 변경됩니다.

## 14.1.2 로컬 구성 설정 (Configuring local.conf)

빌드 환경이 초기화되면 `conf/local.conf` 파일이 생성됩니다. 이 파일에서 타겟 머신과 기타 빌드 옵션을 설정할 수 있습니다.

* **MACHINE 설정**:
    빌드할 대상 하드웨어를 지정합니다.

    ```bitbake
    MACHINE ?= "qemux86-64"
    ```

  * 기본값은 QEMU 에뮬레이터용 `qemux86-64`입니다.
  * 실제 하드웨어(예: Raspberry Pi)를 위한 레이어를 추가했다면 해당 머신 이름으로 변경합니다.

## 14.1.3 이미지 빌드 (Building the Image)

BitBake를 사용하여 이미지를 빌드합니다. 처음 시작할 때는 가장 작고 기본적인 이미지인 `core-image-minimal`을 빌드하는 것이 좋습니다.

* **명령어**:

    ```bash
    bitbake core-image-minimal
    ```

  * 이 명령은 필요한 모든 소스 코드를 다운로드하고, 컴파일하고, 패키징하여 부팅 가능한 이미지를 생성합니다.
  * 첫 빌드는 시스템 사양에 따라 시간이 오래 걸릴 수 있습니다 (수 시간 소요 가능).

## 14.1.4 빌드 결과 확인 (Verifying the Build)

빌드가 완료되면 이미지는 `${TMPDIR}/deploy/images/${MACHINE}/` 디렉토리에 생성됩니다.

* **QEMU 실행**:
    QEMU 타겟(`qemux86` 등)으로 빌드한 경우, `runqemu` 스크립트로 이미지를 바로 실행해 볼 수 있습니다.

    ```bash
    runqemu qemux86-64
    ```

---
참고: 빌드 중 오류가 발생하면 `conf/local.conf` 설정을 확인하거나, 디스크 공간이 충분한지 확인하십시오.
