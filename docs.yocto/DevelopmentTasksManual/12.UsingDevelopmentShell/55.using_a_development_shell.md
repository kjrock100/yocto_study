# Yocto Project: 개발 쉘 사용하기 (Using a Development Shell)

이 문서는 Yocto Project Development Tasks Manual의 12장을 기반으로, `devshell`을 사용하여 레시피의 빌드 환경을 디버깅하고 분석하는 방법을 설명합니다.

## 12.1 개요 (Overview)

개발 쉘(DevShell)은 특정 레시피를 위해 구성된 빌드 환경이 설정된 터미널 세션을 엽니다. 이 쉘에서는 크로스 컴파일러, 링커, 그리고 레시피에 정의된 모든 환경 변수가 설정되어 있어, 마치 BitBake가 작업을 수행하는 것처럼 수동으로 명령어를 실행해 볼 수 있습니다.

## 12.2 DevShell 실행 (Launching DevShell)

DevShell을 실행하려면 `bitbake` 명령어에 `-c devshell` 옵션을 사용합니다.

* **명령어**:

    ```bash
    bitbake -c devshell <recipe_name>
    ```

* **예시**:

    ```bash
    bitbake -c devshell zlib
    ```

    이 명령을 실행하면 새로운 터미널 창이 열리고, 프롬프트는 해당 레시피의 소스 디렉토리(`${S}`)에 위치하게 됩니다.

## 12.3 DevShell 환경 (The DevShell Environment)

DevShell이 열리면 다음과 같은 환경이 구성됩니다.

* **작업 디렉토리**: 기본적으로 소스 코드가 압축 해제되고 패치가 적용된 `${S}` 디렉토리에서 시작합니다.
* **환경 변수**: `CC`, `CXX`, `CFLAGS`, `LDFLAGS`, `CONFIGURE_FLAGS` 등 크로스 컴파일에 필요한 모든 변수가 설정됩니다.
* **PATH**: 크로스 툴체인과 필요한 도구들이 포함된 경로가 `PATH`에 추가됩니다.

## 12.4 사용 사례 (Use Cases)

DevShell은 다음과 같은 상황에서 유용합니다.

1. **빌드 실패 디버깅**: `do_compile`이나 `do_configure`가 실패했을 때, DevShell을 열어 직접 `make`나 `configure` 명령을 실행해보며 오류 원인을 찾을 수 있습니다.
2. **소스 코드 분석**: 패치가 적용된 후의 소스 코드를 확인하거나 수정해 볼 수 있습니다.
3. **수동 빌드 테스트**: 새로운 빌드 옵션을 테스트하거나, Makefile을 수정하여 즉시 결과를 확인할 수 있습니다.

---
참고: DevShell에서 수정한 소스 코드는 빌드 디렉토리(`${WORKDIR}`) 내에 있으므로, `bitbake -c clean`을 실행하면 사라집니다. 영구적인 수정이 필요하다면 `devtool modify`를 사용하는 것이 좋습니다.
