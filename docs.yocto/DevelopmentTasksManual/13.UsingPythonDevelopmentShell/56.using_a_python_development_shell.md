# Yocto Project: Python 개발 쉘 사용하기 (Using a Python Development Shell)

이 문서는 Yocto Project Development Tasks Manual의 13장을 기반으로, `pydevshell`을 사용하여 레시피의 Python 빌드 환경을 디버깅하고 분석하는 방법을 설명합니다.

## 13.1 개요 (Overview)

`pydevshell`은 `devshell`과 유사하지만, 쉘 터미널 대신 대화형 Python 쉘을 제공합니다. 이 환경에서는 BitBake 데이터 저장소(Data Store)와 함수들이 로드되어 있어, 레시피 내의 Python 함수나 변수 확장을 대화형으로 테스트하고 디버깅할 수 있습니다.

## 13.2 Python DevShell 실행 (Launching Python DevShell)

Python DevShell을 실행하려면 `bitbake` 명령어에 `-c pydevshell` 옵션을 사용합니다.

* **명령어**:

    ```bash
    bitbake -c pydevshell <recipe_name>
    ```

* **예시**:

    ```bash
    bitbake -c pydevshell zlib
    ```

    이 명령을 실행하면 새로운 터미널 창이 열리고, Python 프롬프트(시스템에 따라 IPython 또는 기본 Python 쉘)가 나타납니다.

## 13.3 Python DevShell 환경 (The Python DevShell Environment)

`pydevshell` 환경에서는 다음과 같은 주요 객체에 접근할 수 있습니다.

* **`d` (Data Store)**: 현재 레시피의 모든 변수와 설정이 포함된 BitBake 데이터 저장소 객체입니다.
  * `d.getVar('VARIABLE')`: 변수 값을 가져옵니다.
  * `d.setVar('VARIABLE', 'value')`: 변수 값을 설정합니다.
  * `d.expand('${VARIABLE}')`: 변수를 확장합니다.
* **`bb` (BitBake Module)**: BitBake 내부 모듈입니다. 로깅 함수(`bb.note`, `bb.error`)나 유틸리티 함수에 접근할 수 있습니다.

## 13.4 사용 사례 (Use Cases)

`pydevshell`은 다음과 같은 상황에서 유용합니다.

1. **변수 값 확인**: 복잡한 변수 확장이나 오버라이드가 적용된 최종 값을 확인할 때 유용합니다.

    ```python
    d.getVar('S')
    d.getVar('WORKDIR')
    ```

2. **Python 함수 테스트**: 레시피에 작성할 Python 로직을 미리 테스트하거나, 기존 함수의 동작을 분석할 때 사용합니다.
3. **BitBake API 탐색**: BitBake 내부 API의 동작을 이해하고 실험해 볼 수 있습니다.

---
참고: `pydevshell`에서 변경한 내용은 메모리 상에서만 유효하며, 실제 레시피 파일에는 저장되지 않습니다.
