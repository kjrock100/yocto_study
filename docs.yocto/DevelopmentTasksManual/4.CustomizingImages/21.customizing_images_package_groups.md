# 커스텀 패키지 그룹을 사용한 이미지 커스터마이징 (Customizing Images Using Custom Package Groups)

Yocto Project에서 다수의 패키지를 묶어서 관리하거나, 특정 기능에 필요한 패키지 집합을 정의할 때 **패키지 그룹(Package Group)**을 사용하는 것이 효율적입니다. 이 문서는 커스텀 패키지 그룹을 생성하고 이미지에 적용하는 방법을 설명합니다.

## 1. 패키지 그룹이란?

패키지 그룹은 그 자체로는 파일이나 바이너리를 포함하지 않지만, `RDEPENDS`(런타임 의존성)를 통해 다른 패키지들을 설치하도록 유도하는 특수한 레시피입니다.

- **목적**: 관련된 패키지들을 논리적으로 그룹화하여 관리 편의성을 높입니다.
- **예시**: `packagegroup-core-boot`, `packagegroup-core-x11` 등.

## 2. 패키지 그룹 레시피 작성

패키지 그룹 레시피는 일반 레시피와 비슷하지만 `packagegroup` 클래스를 상속받습니다.

### 2.1. 레시피 생성

자신의 레이어 내 `recipes-core/packagegroups/` 디렉토리에 레시피 파일을 생성합니다. 관례적으로 이름은 `packagegroup-`으로 시작합니다.

**예시**: `packagegroup-custom-apps.bb`

```bash
DESCRIPTION = "My Custom Package Group"
SUMMARY = "Custom application package group"
LICENSE = "MIT"

inherit packagegroup

RDEPENDS:${PN} = " \
    strace \
    htop \
    curl \
    python3 \
"
```

### 2.2. 주요 변수

- **inherit packagegroup**: 이 클래스를 상속받아야 패키지 그룹으로 동작합니다.
- **RDEPENDS:${PN}**: 이 그룹이 설치될 때 함께 설치되어야 할 패키지 목록을 정의합니다.

## 3. 이미지에 패키지 그룹 추가

생성한 패키지 그룹을 이미지에 포함시키려면 `IMAGE_INSTALL` 변수에 패키지 그룹 이름을 추가합니다.

### 3.1. local.conf 사용

```bash
IMAGE_INSTALL:append = " packagegroup-custom-apps"
```

### 3.2. 이미지 레시피 사용

```bash
IMAGE_INSTALL += "packagegroup-custom-apps"
```

## 4. 장점

- **재사용성**: 여러 이미지 레시피에서 동일한 패키지 구성을 쉽게 재사용할 수 있습니다.
- **가독성**: 이미지 레시피의 `IMAGE_INSTALL` 목록이 길어지는 것을 방지하여 가독성을 높입니다.
- **유지보수**: 패키지 구성이 변경될 때 패키지 그룹 레시피만 수정하면 되므로 관리가 용이합니다.
