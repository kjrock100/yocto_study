# Yocto Project: 레시피 빌드 실행 (Running a Build on the Recipe)

이 문서는 Yocto Project Development Tasks Manual의 5.4절을 기반으로, 작성한 레시피를 BitBake를 사용하여 빌드하는 방법과 관련 태스크를 설명합니다.

## 5.4 개요 (Overview)

새로운 레시피를 작성한 후에는 전체 이미지를 빌드하기 전에 해당 레시피가 올바르게 작동하는지 확인해야 합니다. BitBake를 사용하면 특정 레시피만 지정하여 빌드 프로세스(Fetch, Unpack, Patch, Configure, Compile, Install, Package 등)를 실행할 수 있습니다.

## 5.4.1 레시피 빌드 (Building the Recipe)

단일 레시피를 빌드하려면 `bitbake` 명령어 뒤에 레시피 이름(패키지 이름)을 입력합니다.

* **명령어**:

    ```bash
    bitbake <recipe_name>
    ```

* **예시**: `myhello`라는 레시피를 빌드하는 경우

    ```bash
    bitbake myhello
    ```

    이 명령은 `myhello` 레시피와 그 의존성들을 파싱하고, 필요한 태스크를 순차적으로 실행하여 패키지 파일(.ipk, .rpm, .deb)을 생성합니다.

## 5.4.2 빌드 정리 (Cleaning the Build)

레시피를 수정하거나 처음부터 다시 빌드해야 할 때, 이전 빌드 아티팩트를 정리해야 할 수 있습니다. BitBake는 이를 위해 몇 가지 정리(clean) 태스크를 제공합니다.

* **clean**: 작업 디렉토리(`${WORKDIR}`)를 삭제합니다. 소스 압축 해제, 컴파일 결과물 등이 삭제됩니다.

    ```bash
    bitbake -c clean <recipe_name>
    ```

* **cleansstate**: `clean` 작업을 수행하고, 추가로 공유 상태(Shared State) 캐시도 삭제합니다. 레시피가 변경되지 않았더라도 BitBake가 태스크를 다시 실행하도록 강제할 때 유용합니다.

    ```bash
    bitbake -c cleansstate <recipe_name>
    ```

* **cleanall**: `cleansstate` 작업을 수행하고, 추가로 다운로드된 소스 파일(`${DL_DIR}`)까지 삭제합니다. 소스 파일이 손상되었거나 업스트림 소스가 변경되어 다시 다운로드해야 할 때 사용합니다.

    ```bash
    bitbake -c cleanall <recipe_name>
    ```

## 5.4.3 특정 태스크 실행 (Running Specific Tasks)

전체 빌드가 아닌 특정 단계까지만 실행하고 싶을 때 `-c` 옵션을 사용합니다.

* **컴파일만 실행**:

    ```bash
    bitbake -c compile <recipe_name>
    ```

---
참고: 레시피를 빌드한다고 해서 해당 패키지가 최종 이미지(예: `core-image-minimal`)에 자동으로 포함되는 것은 아닙니다. 이미지에 포함시키려면 `local.conf`의 `IMAGE_INSTALL` 변수에 추가하거나 이미지 레시피를 수정해야 합니다.
