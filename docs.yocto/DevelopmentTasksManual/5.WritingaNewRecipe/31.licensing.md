# Yocto Project: 라이선스 (Licensing)

이 문서는 Yocto Project Development Tasks Manual의 5.8절을 기반으로, 레시피 작성 시 필수적으로 포함해야 하는 라이선스 정보(`LICENSE`, `LIC_FILES_CHKSUM`)를 설정하는 방법에 대해 설명합니다.

## 5.8 개요 (Overview)

오픈 소스 소프트웨어를 사용하여 시스템을 구축할 때 라이선스 준수는 매우 중요합니다. Yocto Project는 빌드 과정에서 사용되는 모든 소프트웨어의 라이선스를 추적하고 관리할 수 있는 메커니즘을 제공합니다. 이를 위해 모든 레시피는 소프트웨어의 라이선스 종류와 해당 라이선스 텍스트가 포함된 파일의 체크섬을 명시해야 합니다.

## 5.8.1 LICENSE 변수 (The LICENSE Variable)

`LICENSE` 변수는 소프트웨어 패키지가 따르는 라이선스를 지정합니다. Yocto Project는 SPDX(Software Package Data Exchange) 라이선스 식별자를 표준으로 사용합니다.

* **단일 라이선스**:

    ```bitbake
    LICENSE = "GPL-2.0-only"
    ```

* **복합 라이선스**: 여러 라이선스가 적용되는 경우 논리 연산자를 사용하여 표현합니다.
  * `&` (AND): 두 라이선스를 모두 준수해야 함.
  * `|` (OR): 두 라이선스 중 하나를 선택할 수 있음.

    ```bitbake
    LICENSE = "GPL-2.0-only & MIT"
    LICENSE = "GPL-2.0-only | MIT"
    ```

* **독점/비공개 라이선스**: 오픈 소스가 아닌 경우 `CLOSED`를 사용합니다.

    ```bitbake
    LICENSE = "CLOSED"
    ```

## 5.8.2 LIC_FILES_CHKSUM 변수 (The LIC_FILES_CHKSUM Variable)

`LIC_FILES_CHKSUM` 변수는 소스 코드 내에 포함된 라이선스 텍스트 파일의 위치와 체크섬(md5)을 지정합니다. 이는 업스트림 소스 코드의 라이선스 내용이 변경되었을 때 개발자가 이를 인지할 수 있도록 하기 위함입니다.

* **구문**: `file://<파일명>;md5=<체크섬>`
* **예시**:

    ```bitbake
    LIC_FILES_CHKSUM = "file://COPYING;md5=d32239bcb673463ab874e80d47fae504 \
                        file://src/main.c;beginline=1;endline=20;md5=1234567890abcdef..."
    ```

  * `COPYING`: 소스 트리 최상위에 있는 라이선스 파일.
  * `src/main.c`: 별도의 라이선스 파일이 없는 경우, 소스 파일 헤더의 주석 부분을 지정할 수 있습니다 (`beginline`, `endline` 옵션 사용).

## 5.8.3 체크섬 구하기 (Calculating the Checksum)

소스 코드를 압축 해제한 후 `md5sum` 명령어를 사용하여 체크섬을 구할 수 있습니다.

```bash
$ md5sum COPYING
d32239bcb673463ab874e80d47fae504  COPYING
```

---
참고: `LICENSE`가 `CLOSED`인 경우에도 `LIC_FILES_CHKSUM`은 설정해야 할 수 있으며, 라이선스 파일이 전혀 없는 경우 `LIC_FILES_CHKSUM = ""`로 비워둘 수 있으나 권장되지 않습니다. 라이선스 내용이 변경되어 체크섬이 불일치하면 빌드가 실패하며, 변경 사항을 검토한 후 레시피를 업데이트해야 합니다.
