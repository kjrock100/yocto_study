# Yocto Project: 레시피 스타일 가이드라인 준수 (Following Recipe Style Guidelines)

이 문서는 Yocto Project Development Tasks Manual의 5.22절을 기반으로, 레시피 작성 시 일관성과 가독성을 유지하기 위해 따라야 할 스타일 가이드라인을 설명합니다.

## 5.22 개요 (Overview)

레시피를 작성할 때 표준화된 스타일을 따르면 다른 개발자가 코드를 이해하고 유지 관리하기 쉬워집니다. OpenEmbedded 커뮤니티는 변수 명명, 들여쓰기, 변수 순서 등에 대한 규칙을 정립해 두었습니다.

## 5.22.1 변수 순서 (Variable Order)

레시피 내에서 변수를 정의할 때 권장되는 순서는 다음과 같습니다. 일관된 순서는 정보를 빠르게 찾는 데 도움을 줍니다.

1. **메타데이터**: `SUMMARY`, `DESCRIPTION`, `AUTHOR`, `HOMEPAGE`, `SECTION`, `LICENSE`, `LIC_FILES_CHKSUM`
2. **의존성**: `DEPENDS`, `PROVIDES`
3. **버전 및 소스**: `PV`, `SRC_URI`, `SRCREV`
4. **빌드 설정**: `S`, `B`, `inherit`
5. **구성 및 컴파일 옵션**: `EXTRA_OECONF`, `EXTRA_OEMAKE`, `PACKAGECONFIG`
6. **태스크 정의**: `do_configure`, `do_compile`, `do_install` 등
7. **패키징**: `PACKAGES`, `FILES`, `RDEPENDS`, `RRECOMMENDS`

## 5.22.2 들여쓰기 (Indentation)

* **규칙**: 탭(Tab) 문자를 사용하지 않고, **스페이스(Space)**를 사용합니다.
* **크기**: 일반적으로 **4칸** 들여쓰기를 사용합니다.
* **쉘/파이썬 함수**: 함수 내부에서도 동일하게 스페이스 4칸을 사용합니다.

## 5.22.3 변수 사용 (Using Variables)

* **하드코딩 피하기**: 경로를 직접 적는 대신 표준 변수(`${bindir}`, `${sysconfdir}`, `${D}`, `${S}` 등)를 사용해야 합니다.
* **패키지 이름**: 패키지 이름을 직접 적는 대신 `${PN}`을 사용합니다.
* **버전**: 버전 번호를 직접 적는 대신 `${PV}`를 사용합니다.

## 5.22.4 패치 상태 (Patch Upstream Status)

모든 패치 파일은 헤더에 `Upstream-Status` 태그를 포함해야 합니다. 이는 패치가 업스트림 프로젝트에 제출되었는지, 거부되었는지, 혹은 Yocto Project 전용인지 등을 나타냅니다.

* **형식**:

    ```text
    Upstream-Status: <Status> [Reason]
    ```

* **상태 종류**: `Accepted`, `Submitted`, `Denied`, `Inappropriate`, `Backport`, `Pending`

## 5.22.5 쉘 함수 스타일 (Shell Function Style)

쉘 함수는 `/bin/sh` 호환성을 유지해야 합니다 (bashism 피하기).

* **권장 스타일**:

    ```bitbake
    do_install() {
        install -d ${D}${bindir}
        install -m 0755 ${S}/myapp ${D}${bindir}
    }
    ```

## 5.22.6 비트베이크 확장 문법 (BitBake Extension Syntax)

변수에 값을 추가하거나 덮어쓸 때, 공백 처리에 주의해야 합니다.

* `+=`: 공백을 자동으로 추가하며 값을 뒤에 붙입니다.
* `=+`: 공백을 자동으로 추가하며 값을 앞에 붙입니다.
* `:append`: 공백 없이 문자열을 뒤에 붙입니다. (필요 시 앞에 공백을 직접 넣어야 함)
* `:prepend`: 공백 없이 문자열을 앞에 붙입니다.

---
참고: 기존 레시피를 수정할 때는 해당 파일의 기존 스타일을 존중하는 것이 좋지만, 새로운 레시피를 작성할 때는 위 가이드라인을 따르는 것이 강력히 권장됩니다.
