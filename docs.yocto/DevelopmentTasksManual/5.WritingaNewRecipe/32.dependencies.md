# Yocto Project: 의존성 (Dependencies)

이 문서는 Yocto Project Development Tasks Manual의 5.9절을 기반으로, 레시피 빌드 및 실행 시 필요한 의존성(`DEPENDS`, `RDEPENDS`)을 설정하는 방법에 대해 설명합니다.

## 5.9 개요 (Overview)

BitBake가 올바른 순서로 빌드를 수행하고 최종 이미지에 필요한 패키지를 포함시키기 위해서는 레시피 간의 의존 관계를 명확히 정의해야 합니다. 의존성은 크게 빌드 타임 의존성과 런타임 의존성으로 나뉩니다.

## 5.9.1 빌드 타임 의존성 (Build Dependencies - DEPENDS)

`DEPENDS` 변수는 현재 레시피를 빌드하기 위해(컴파일, 링크 등) 미리 빌드되어야 하는 다른 레시피들을 지정합니다. `DEPENDS`에 나열된 레시피들의 `do_populate_sysroot` 태스크가 완료되어야 현재 레시피의 `do_configure` 태스크가 실행됩니다.

* **구문**: `DEPENDS = "recipe-name"`
* **예시**: `curl` 레시피가 `openssl` 라이브러리를 사용하여 컴파일된다면:

    ```bitbake
    DEPENDS = "openssl"
    ```

    이 경우 `openssl`의 헤더 파일과 라이브러리가 레시피의 sysroot에 채워집니다.

## 5.9.2 런타임 의존성 (Runtime Dependencies - RDEPENDS)

`RDEPENDS` 변수는 패키지가 타겟 시스템에서 실행될 때 필요한 다른 패키지들을 지정합니다. 이는 주로 스크립트 언어(Python, Perl 등)나 쉘 스크립트, 또는 동적 링크가 자동으로 감지되지 않는 경우에 사용됩니다.

* **구문**: `RDEPENDS:${PN} = "package-name"`
* **주의사항**: `RDEPENDS`는 레시피가 아닌 **패키지** 단위로 적용되므로, 반드시 패키지 이름 오버라이드(예: `:${PN}`)를 사용해야 합니다.
* **자동 의존성**: 공유 라이브러리(.so)에 대한 의존성은 BitBake가 빌드 과정(`do_package`)에서 자동으로 감지하여 추가하므로, 명시적으로 적지 않아도 되는 경우가 많습니다.
* **예시**:

    ```bitbake
    RDEPENDS:${PN} = "bash perl"
    ```

## 5.9.3 추천 의존성 (Recommended Dependencies - RRECOMMENDS)

`RRECOMMENDS`는 `RDEPENDS`와 유사하지만, 해당 패키지가 없어도 설치가 실패하지 않는다는 점이 다릅니다. 주로 기능을 확장하거나 특정 하드웨어 지원을 위한 패키지(드라이버, 펌웨어 등)를 지정할 때 사용합니다.

* **예시**:

    ```bitbake
    RRECOMMENDS:${PN} = "kernel-module-iwlwifi"
    ```

---
참고: `DEPENDS`는 레시피 이름(예: `virtual/kernel`)을 사용하고, `RDEPENDS`는 패키지 이름(예: `kernel-image`)을 사용한다는 점을 구별해야 합니다.
