# Yocto Project: 워크플로우에서 Quilt 사용하기 (Using Quilt in Your Workflow)

이 문서는 Yocto Project Development Tasks Manual의 11장을 기반으로, 개발 워크플로우에서 Quilt를 사용하여 패치를 관리하는 방법을 설명합니다.

## 11.1 개요 (Overview)

Quilt는 소스 코드에 대한 패치를 관리하는 강력한 도구입니다. Yocto Project에서는 빌드 과정 중 레시피에 패치를 적용하고 관리하는 데 Quilt를 활용합니다. 이를 통해 패치를 스택처럼 쌓아 올리거나 제거(push/pop)하며 관리할 수 있습니다.

## 11.2 Quilt 설정 (Configuring Quilt)

Yocto 워크플로우에서 Quilt를 사용하려면 빌드 호스트에 Quilt가 설치되어 있어야 합니다.

* **설치**:

    ```bash
    sudo apt-get install quilt  # Ubuntu/Debian
    sudo yum install quilt      # CentOS/RHEL
    ```

## 11.3 레시피와 함께 Quilt 사용 (Using Quilt with Recipes)

개발 중에 수동으로 Quilt를 사용하여 패치를 관리할 수 있습니다.

### 11.3.1 패치 생성 (Creating a Patch)

1. **소스 디렉토리 이동**:
    레시피의 소스 디렉토리(예: `tmp/work/.../git`)로 이동합니다.

2. **Quilt 초기화 및 새 패치 생성**:

    ```bash
    quilt init
    quilt new my-feature.patch
    ```

3. **파일 추가 및 편집**:
    수정할 파일을 Quilt에 추가하고 편집합니다.

    ```bash
    $ quilt add file.c
    # 파일 편집 수행
    ```

4. **패치 갱신**:
    변경 사항을 패치 파일에 저장합니다.

    ```bash
    quilt refresh
    ```

### 11.3.2 패치 적용 및 해제 (Applying and Removing Patches)

* **적용**: `quilt push` (다음 패치), `quilt push -a` (모두 적용)
* **해제**: `quilt pop` (최근 패치), `quilt pop -a` (모두 해제)

## 11.4 워크플로우 통합 (Integrating Quilt in Your Workflow)

`devtool`과 함께 Quilt를 사용하면 효율적입니다.

1. **소스 추출**: `devtool modify <recipe-name>`
2. **패치 작업**: 소스 디렉토리에서 `quilt new`, `quilt add`, `quilt refresh` 수행.
3. **테스트**: 변경 사항 빌드 및 테스트.
4. **적용**: 패치를 레시피 디렉토리로 이동하고 레시피(`SRC_URI`) 업데이트.

---
참고: 패치 적용 실패 시 충돌을 확인하고 해결해야 하며, `quilt series` 명령어로 현재 패치 목록을 확인할 수 있습니다.
