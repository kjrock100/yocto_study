# 팀 개발 환경 구성 (Creating a Team Development Environment)

Yocto Project를 사용하여 팀 단위로 개발을 진행할 때, 소스 코드 다운로드 시간과 빌드 시간을 단축하기 위해 효율적인 공유 환경을 구축하는 것이 중요합니다. 이 문서는 팀 개발 환경을 설정하는 주요 방법을 설명합니다.

## 1. 개요
팀 개발 환경의 핵심은 **한 번 다운로드하거나 빌드한 결과물을 팀원 전체가 재사용**하는 것입니다. 이를 위해 주로 `DL_DIR`(다운로드 디렉토리)과 `SSTATE_DIR`(공유 상태 캐시)를 공유합니다.

## 2. 공유 다운로드 디렉토리 (Shared DL_DIR)
모든 개발자가 동일한 소스 코드를 각자 다운로드하는 것은 대역폭과 시간 낭비입니다. 이를 방지하기 위해 다운로드된 소스 파일(tarball 등)을 저장하는 중앙 디렉토리를 설정합니다.

- **설정 방법**: `local.conf` 또는 `site.conf` 파일에 `DL_DIR` 변수를 설정합니다.
- **예시**:
  ```bash
  DL_DIR = "/var/cache/yocto/downloads"
  ```
- **권한 설정**: 해당 디렉토리는 팀원들이 읽고 쓸 수 있는 권한(예: 그룹 쓰기 권한 `chmod g+ws`)이 있어야 합니다.

## 3. 공유 상태 캐시 (Shared State Cache)
빌드된 객체(Shared State)를 공유하면, 한 명이 빌드한 패키지를 다른 팀원이 다시 컴파일하지 않고 재사용할 수 있어 빌드 속도가 비약적으로 향상됩니다.

### 3.1. SSTATE_DIR 직접 공유 (소규모 팀)
신뢰할 수 있는 소규모 팀의 경우 `SSTATE_DIR`을 직접 공유할 수 있습니다.
- **설정**:
  ```bash
  SSTATE_DIR = "/var/cache/yocto/sstate-cache"
  ```

### 3.2. SSTATE_MIRRORS 사용 (권장)
캐시 오염을 방지하고 안정성을 높이기 위해, 빌드 서버가 생성한 캐시를 개발자들이 읽기 전용(Read-only)으로 참조하도록 설정하는 것이 좋습니다.

- **설정**:
  ```bash
  SSTATE_MIRRORS ?= "file://.* file:///var/cache/yocto/sstate-cache/PATH"
  ```
  여기서 `PATH`는 서버의 공유 경로입니다. `http://` 또는 `ftp://` 프로토콜을 사용하여 원격 서버를 지정할 수도 있습니다.

## 4. 소스 미러 (Source Mirrors) 설정
업스트림 소스 저장소의 접속 장애에 대비하거나 내부 네트워크 속도를 활용하기 위해 `PREMIRRORS`를 설정할 수 있습니다.

```bash
PREMIRRORS ?= "\
git://.*/.* http://myserver/sources/ \n \
ftp://.*/.* http://myserver/sources/ \n \
http://.*/.* http://myserver/sources/ \n \
https://.*/.* http://myserver/sources/ \n"
```

## 5. 설정 파일 공유 (site.conf)
팀 전체에 공통적으로 적용되어야 하는 설정(`DL_DIR`, `SSTATE_MIRRORS` 등)은 `conf/local.conf` 대신 `conf/site.conf` 파일에 작성하여 배포하면, 개별 개발자가 설정을 신경 쓰지 않아도 자동으로 적용됩니다.
