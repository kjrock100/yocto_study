# 빌드 호스트 준비 (Preparing the Build Host)

Yocto Project를 사용하여 이미지를 빌드하기 위해서는 적절한 빌드 호스트 환경을 구성해야 합니다. 이 문서는 네이티브 리눅스, CROPS(Docker), WSL 2를 사용하는 세 가지 주요 방법을 설명합니다.

## 1. 네이티브 리눅스 호스트 설정 (Native Linux Host)
가장 권장되는 방법은 지원되는 리눅스 배포판(Ubuntu, Fedora, Debian, OpenSUSE 등)을 직접 사용하는 것입니다.

### 1.1. 필수 패키지 설치
빌드 시스템(BitBake)과 OpenEmbedded Core가 올바르게 작동하려면 호스트에 필수 패키지들이 설치되어 있어야 합니다.

- **Ubuntu/Debian**:
  ```bash
  sudo apt-get install gawk wget git diffstat unzip texinfo gcc build-essential \
  chrpath socat cpio python3 python3-pip python3-pexpect xz-utils debianutils \
  iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev pylint3 \
  xterm python3-subunit mesa-common-dev zstd liblz4-tool
  ```

- **Fedora**:
  ```bash
  sudo dnf install gawk make wget tar bzip2 gzip python3 unzip perl patch \
  diffutils diffstat git cpp gcc gcc-c++ glibc-devel texinfo chrpath \
  ccache perl-Data-Dumper perl-Text-ParseWords perl-Thread-Queue socat \
  findutils which python3-pexpect python3-pip python3-git python3-jinja2 \
  python3-subunit xz zstd lz4
  ```

## 2. CROPS 사용 (CROss PlatformS)
CROPS는 Docker 컨테이너를 사용하여 운영체제(Windows, macOS, Linux)에 구애받지 않고 Yocto Project 빌드 환경을 제공하는 오픈 소스 프로젝트입니다.

- **장점**: 호스트 OS의 라이브러리 버전이나 설정에 영향을 받지 않는 격리된 환경 제공.
- **사용법**: Docker가 설치된 환경에서 `poky-container` 이미지를 실행하여 빌드를 수행합니다.
  ```bash
  docker run --rm -it -v $(pwd):/workdir crops/poky --workdir=/workdir
  ```

## 3. WSL 2 사용 (Windows Subsystem For Linux)
Windows 10 또는 Windows 11 사용자는 WSL 2(Windows Subsystem for Linux version 2)를 사용하여 리눅스 커널을 포함한 완전한 리눅스 환경을 구축할 수 있습니다.

- **특징**: 가상 머신보다 가볍고 빠르며, Windows 파일 시스템과 통합되어 있습니다.
- **설정 단계**:
  1. Windows에서 WSL 2 활성화 및 Linux 배포판(예: Ubuntu 20.04 LTS 이상) 설치.
  2. 설치된 Linux 터미널을 열고 **네이티브 리눅스 호스트 설정**과 동일하게 필수 패키지 설치.
  3. 빌드 디렉토리는 Windows 파일 시스템(`/mnt/c/...`)이 아닌 WSL 리눅스 파일 시스템(`~/...`) 내부에 생성하는 것이 성능상 유리합니다.

## 4. 기타 고려사항
- **Git 설정**: `git config`를 통해 사용자 이름과 이메일을 설정해야 패치 작성 등이 가능합니다.
- **디스크 공간**: 빌드 과정에서 많은 용량(최소 50GB, 권장 100GB 이상)이 필요하므로 충분한 공간을 확보해야 합니다.
