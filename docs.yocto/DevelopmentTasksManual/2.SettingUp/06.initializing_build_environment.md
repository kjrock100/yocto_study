# Yocto Project 빌드 환경 초기화 (Initializing the Build Environment)

Yocto Project 개발을 위해 소스 코드를 확보한 후, 실제 빌드 작업을 수행하기 위해서는 빌드 환경을 초기화해야 합니다. 이 문서는 `oe-init-build-env` 스크립트를 사용하여 빌드 환경을 설정하는 방법을 설명합니다.

## 1. 환경 설정 스크립트 실행 (Running the Environment Setup Script)

Yocto Project의 빌드 시스템인 BitBake를 사용하기 위해서는 환경 변수가 올바르게 설정되어야 합니다. 이를 위해 소스 디렉토리 최상위에 있는 설정 스크립트를 소싱(source)해야 합니다.

- **기본 명령어**:

  ```bash
  cd poky
  source oe-init-build-env
  ```

  이 명령을 실행하면 자동으로 `build`라는 이름의 디렉토리가 생성되고, 현재 쉘의 작업 디렉토리가 해당 위치로 변경됩니다.

## 2. 사용자 정의 빌드 디렉토리 (Custom Build Directory)

기본 `build` 디렉토리 대신 다른 이름을 사용하거나, 여러 개의 빌드 환경을 유지하고 싶은 경우 스크립트 뒤에 디렉토리 이름을 인자로 전달할 수 있습니다.

- **예시**:

  ```bash
  source oe-init-build-env mybuilds/project-a
  ```

  이 경우 `poky/mybuilds/project-a` 디렉토리가 생성되고 초기화됩니다. 이를 통해 하나의 소스 트리에서 여러 프로젝트(예: 다른 머신 타겟)를 독립적으로 관리할 수 있습니다.

## 3. 생성되는 설정 파일 (Configuration Files)

빌드 환경이 초기화되면 빌드 디렉토리 내의 `conf` 폴더에 중요한 설정 파일들이 자동으로 생성됩니다. (이미 존재하는 경우 덮어쓰지 않습니다.)

- **local.conf**: 타겟 머신(`MACHINE`), 다운로드 디렉토리(`DL_DIR`), 공유 상태 캐시(`SSTATE_DIR`), 디스크 공간 모니터링 등 로컬 빌드 환경에 대한 설정을 정의합니다. 가장 자주 수정하게 되는 파일입니다.
- **bblayers.conf**: 빌드에 포함할 레이어들의 경로를 정의합니다. 수동으로 편집하기보다는 `bitbake-layers` 명령어를 통해 관리하는 것이 권장됩니다.

## 4. 초기화 후 작업

스크립트 실행 후 터미널 프롬프트가 변경되며, 이제 `bitbake` 명령어를 사용할 수 있는 상태가 됩니다.

```bash
# 예: 최소 이미지 빌드
bitbake core-image-minimal
```
