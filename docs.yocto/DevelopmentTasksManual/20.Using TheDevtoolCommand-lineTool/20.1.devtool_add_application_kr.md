# devtool add를 사용하여 애플리케이션 추가하기 (Use devtool add to Add an Application)

`devtool add` 명령은 Yocto Project 개발 워크플로우의 시작점으로, 소스 코드를 기반으로 새로운 레시피를 자동으로 생성하고 작업 공간(Workspace)에 설정하는 역할을 합니다. 이를 통해 개발자는 복잡한 레시피 작성 과정을 건너뛰고 빠르게 빌드 및 테스트를 시작할 수 있습니다.

## 1. 기본 구문

```bash
devtool add [options] [recipename] <source-url> [srctree]
```

## 2. 주요 인자 설명

* **recipename** (선택 사항): 생성할 레시피의 이름입니다. 지정하지 않으면 `devtool`이 소스 URL이나 파일명에서 이름을 자동으로 추측합니다.
* **source-url**: 소스 코드의 위치입니다. Git 저장소 URL, Tarball URL, 로컬 디렉토리 경로, npm 주소 등을 사용할 수 있습니다.
* **srctree** (선택 사항): 소스 코드를 추출할 작업 공간 내의 경로입니다. 지정하지 않으면 `workspace/sources/<recipename>` 경로에 자동으로 소스 트리가 생성됩니다.

## 3. 동작 과정

1. **소스 가져오기 (Fetch)**: 지정된 URL에서 소스 코드를 다운로드하거나 로컬 경로를 참조합니다.
2. **소스 추출 (Unpack)**: `srctree`로 지정된 디렉토리(또는 기본 경로)에 소스 코드를 풉니다. Git 저장소의 경우 `git clone`과 유사하게 동작합니다.
3. **레시피 생성 (Generate)**: 내부적으로 `recipetool`을 호출하여 소스 트리를 분석하고 레시피(`.bb`)를 생성합니다.
    * **빌드 시스템 감지**: Autotools, CMake, Make, Meson, Node.js 등을 자동으로 파악하여 적절한 클래스(`inherit`)를 설정합니다.
    * **라이선스 스캔**: 소스 내의 `COPYING`, `LICENSE` 등의 파일을 찾아 `LIC_FILES_CHKSUM`을 계산합니다.
    * **의존성 추측**: 빌드에 필요한 라이브러리나 도구를 감지하여 `DEPENDS` 변수에 추가합니다.
4. **작업 공간 등록**: 생성된 레시피를 `workspace/recipes`에 저장하고, 해당 레시피가 빌드 시 우선순위를 갖도록 `workspace/appends`에 설정합니다.

## 4. 사용 예시

### 4.1 원격 Git 저장소 사용

GitHub 등의 원격 저장소에 있는 프로젝트를 가져올 때 가장 많이 사용됩니다.

```bash
# 기본 사용 (이름 자동 추측)
devtool add https://github.com/example/my-project.git

# 이름 지정 및 특정 브랜치/태그 사용 (-S 또는 --version)
devtool add my-project https://github.com/example/my-project.git -S v1.0
```

### 4.2 로컬 소스 코드 사용

이미 로컬에 소스 코드가 존재하는 경우 해당 경로를 지정할 수 있습니다. 이 경우 소스를 복사하지 않고 해당 위치를 참조하도록 설정할 수도 있습니다.

```bash
devtool add my-local-app /home/user/projects/my-app
```

### 4.3 Tarball 아카이브 사용

압축 파일(tar.gz 등)을 소스로 사용할 수 있습니다.

```bash
devtool add my-archive http://example.com/downloads/my-app-1.0.tar.gz
```

### 4.4 Node.js (NPM) 패키지

NPM 레지스트리의 패키지를 추가할 수 있습니다.

```bash
devtool add "npm://registry.npmjs.org;name=express;version=4.17.1"
```

---
*참고: 이 문서는 Yocto Project Development Tasks Manual의 'Use devtool add to Add an Application' 섹션을 기반으로 작성되었습니다.*
