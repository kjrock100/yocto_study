# 타겟 장치를 원래 상태로 복원하기 (Restoring the Target Device to its Original State)

`devtool deploy-target` 명령을 사용하여 개발 중인 레시피의 결과물을 타겟 장치에 배포하여 테스트한 후, 해당 변경 사항을 제거하고 장치를 원래 상태로 되돌려야 할 때가 있습니다. `devtool undeploy-target` 명령이 이 역할을 수행합니다.

## 1. 개요

개발 과정에서 `devtool deploy-target`은 빌드된 파일들을 SSH를 통해 타겟 장치로 복사합니다. 이때 기존에 존재하던 파일이 덮어씌워질 경우, `devtool`은 원본 파일을 백업해 둡니다. 테스트가 완료된 후 `undeploy-target`을 실행하면 배포된 파일들을 삭제하고, 백업된 원본 파일들을 복원하여 장치를 배포 이전의 상태로 깔끔하게 되돌립니다.

## 2. 기본 구문

```bash
devtool undeploy-target [options] <recipename> <target>
```

* **recipename**: 배포를 취소할 레시피의 이름입니다 (예: `my-app`).
* **target**: 타겟 장치의 주소입니다. SSH 연결 형식을 사용합니다 (예: `root@192.168.7.2`).

## 3. 사용 예시

`my-recipe`라는 애플리케이션을 타겟 장치(`192.168.7.2`)에서 테스트한 후 제거하는 과정은 다음과 같습니다.

```bash
# 1. 배포 및 테스트 (이미 수행된 상태라고 가정)
# devtool deploy-target my-recipe root@192.168.7.2

# 2. 배포 취소 및 복원
devtool undeploy-target my-recipe root@192.168.7.2
```

## 4. 주의 사항

* **배포된 파일만 제거**: 이 명령은 `devtool deploy-target`으로 복사된 파일들만 제거합니다. 애플리케이션 실행 중에 생성된 로그 파일이나 설정 파일 등은 제거되지 않을 수 있습니다.
* **스크립트 미실행**: 패키지 관리자(RPM, IPK 등)를 통한 설치 제거와 달리, `pre-remove`나 `post-remove` 스크립트는 실행되지 않습니다. 단순히 파일 시스템 수준에서의 파일 삭제 및 복원 작업입니다.
* **연결 상태**: 타겟 장치가 켜져 있어야 하며, SSH를 통해 접근 가능해야 합니다.

## 5. 요약

이 기능을 사용하면 매번 전체 시스템 이미지를 다시 굽지 않고도, 수정된 애플리케이션을 반복적으로 배포하고 제거하며 효율적으로 테스트할 수 있습니다.

---
*참고: 이 문서는 Yocto Project Development Tasks Manual의 'Restoring the Target Device to its Original State' 섹션을 기반으로 작성되었습니다.*
