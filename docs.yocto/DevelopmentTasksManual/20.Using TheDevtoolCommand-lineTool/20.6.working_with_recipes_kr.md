# 레시피 작업하기 (Working With Recipes)

`devtool`을 사용하여 레시피를 작업 공간(Workspace)에 추가하거나 수정한 후, 개발자는 빌드, 설정 변경, 패키징 테스트 등 다양한 작업을 수행하게 됩니다. 이 섹션에서는 이러한 일상적인 개발 작업들을 효율적으로 수행하는 방법을 설명합니다.

## 1. 로그 및 작업 파일 찾기 (Finding Logs and Work Files)

레시피를 빌드하거나 설정하는 과정에서 오류가 발생하면, `devtool`은 로그 파일의 경로를 출력해 줍니다. 개발자는 이 파일들을 통해 문제의 원인을 파악할 수 있습니다.

* **위치**: 일반적으로 소스 트리가 추출된 디렉토리 내의 `temp` 폴더에 위치합니다. (예: `workspace/sources/<recipename>/temp`)
* **주요 파일**:
  * `log.do_<taskname>`: 해당 태스크(예: `do_configure`, `do_compile`)의 실행 결과 로그입니다. 컴파일러 오류 메시지 등을 확인할 수 있습니다.
  * `run.do_<taskname>`: BitBake가 실제로 실행한 쉘 스크립트입니다. 환경 변수 설정이나 실행된 명령어를 정확히 확인할 때 유용합니다.

## 2. 구성 인자 설정하기 (Setting Configure Arguments)

Autotools나 CMake와 같은 빌드 시스템을 사용하는 레시피의 경우, `configure` 스크립트에 전달할 인자를 변경해야 할 때가 있습니다.

* **도움말 확인**: `devtool configure-help <recipename>` 명령을 실행하면, 해당 소스 코드의 `configure` 스크립트가 지원하는 옵션 목록(예: `./configure --help` 결과)을 보여줍니다.
* **인자 설정**: `devtool configure <recipename> <args>` 명령을 사용하여 인자를 설정할 수 있습니다.
  * 예: `devtool configure my-recipe --enable-feature-a`
  * 이 명령은 레시피(또는 bbappend)의 `EXTRA_OECONF`나 `EXTRA_OECMAKE` 변수를 갱신하여 설정을 영구적으로 적용하거나 테스트할 수 있게 해줍니다.

## 3. 레시피 간 파일 공유 (Sharing Files Between Recipes)

라이브러리 레시피를 개발 중이고, 다른 애플리케이션 레시피가 이 라이브러리를 참조해야 하는 경우가 있습니다.

* **동작 방식**: `devtool build <library-recipe>`를 실행하면, `devtool`은 컴파일된 결과물(헤더 파일, 라이브러리 파일 등)을 공유 `sysroot`에 설치합니다.
* **효과**: 작업 공간에 있는 라이브러리를 빌드하면, 작업 공간에 있거나 일반 레이어에 있는 다른 레시피들이 이 변경된 라이브러리를 즉시 참조하여 링크할 수 있게 됩니다. 이를 통해 라이브러리와 애플리케이션을 동시에 수정하며 통합 테스트를 진행할 수 있습니다.

## 4. 패키징 (Packaging)

소스 코드가 컴파일된 후, 파일들이 올바른 패키지(예: 메인 패키지, `-dev`, `-dbg` 등)로 나뉘어 들어가는지 확인해야 합니다.

* **명령**: `devtool package <recipename>`
* **기능**: 이 명령은 빌드 시스템의 패키징 관련 태스크(`do_package`, `do_package_write_*`)를 실행하여 IPK, RPM, DEB 등의 패키지 파일을 생성합니다.
* **활용**:
  * `FILES` 변수 설정이 올바른지 검증할 때 사용합니다.
  * 생성된 패키지 파일의 내용을 직접 확인하여 누락된 파일이 없는지 점검할 수 있습니다.

---
*참고: 이 문서는 Yocto Project Development Tasks Manual의 'Working With Recipes' 섹션을 기반으로 작성되었습니다.*
